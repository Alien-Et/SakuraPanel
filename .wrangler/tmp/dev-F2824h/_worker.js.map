{
  "version": 3,
  "sources": ["../../../_worker.js", "file:///C:/Users/Administrator/AppData/Roaming/npm/node_modules/wrangler/templates/middleware/middleware-ensure-req-body-drained.ts", "file:///C:/Users/Administrator/AppData/Roaming/npm/node_modules/wrangler/templates/middleware/middleware-miniflare3-json-error.ts", "../bundle-O2wWoK/middleware-insertion-facade.js", "file:///C:/Users/Administrator/AppData/Roaming/npm/node_modules/wrangler/templates/middleware/common.ts", "../bundle-O2wWoK/middleware-loader.entry.ts"],
  "sourceRoot": "D:\\SakuraPanel\\.wrangler\\tmp\\dev-F2824h",
  "sourcesContent": ["import { connect } from 'cloudflare:sockets';\r\n\r\n// \u57FA\u7840\u914D\u7F6E\r\nlet \u914D\u7F6E\u8DEF\u5F84 = \"config\";\r\nlet \u4F18\u9009\u8282\u70B9 = [];\r\nlet \u53CD\u4EE3\u5730\u5740 = 'ProxyIP.JP.CMLiussss.net';\r\nlet SOCKS5\u8D26\u53F7 = '';\r\nlet \u8282\u70B9\u540D\u79F0 = '\uD83C\uDF38\u6A31\u82B1';\r\nlet \u4F2A\u88C5\u57DF\u540D = 'lkssite.vip';\r\nlet \u6700\u5927\u5931\u8D25\u6B21\u6570 = 5;\r\nlet \u9501\u5B9A\u65F6\u95F4 = 5 * 60 * 1000;\r\n\r\n// \u9ED8\u8BA4\u58C1\u7EB8\u5730\u5740\r\nconst \u9ED8\u8BA4\u767D\u5929\u80CC\u666F\u56FE = 'https://i.meee.com.tw/el91luR.png';\r\nconst \u9ED8\u8BA4\u6697\u9ED1\u80CC\u666F\u56FE = 'https://i.meee.com.tw/QPWx8nX.png';\r\n\r\n// ====================== \u8F85\u52A9\u51FD\u6570 ======================\r\nfunction \u521B\u5EFAHTML\u54CD\u5E94(\u5185\u5BB9, \u72B6\u6001\u7801 = 200) {\r\n  return new Response(\u5185\u5BB9, {\r\n    status: \u72B6\u6001\u7801,\r\n    headers: {\r\n      \"Content-Type\": \"text/html;charset=utf-8\",\r\n      \"Cache-Control\": \"no-store, no-cache, must-revalidate, max-age=0\"\r\n    }\r\n  });\r\n}\r\n\r\nfunction \u521B\u5EFA\u91CD\u5B9A\u5411\u54CD\u5E94(\u8DEF\u5F84, \u989D\u5916\u5934 = {}) {\r\n  return new Response(null, {\r\n    status: 302,\r\n    headers: {\r\n      \"Location\": \u8DEF\u5F84,\r\n      \"Cache-Control\": \"no-store, no-cache, must-revalidate, max-age=0\",\r\n      ...\u989D\u5916\u5934\r\n    }\r\n  });\r\n}\r\n\r\nfunction \u521B\u5EFAJSON\u54CD\u5E94(\u6570\u636E, \u72B6\u6001\u7801 = 200, \u989D\u5916\u5934 = {}) {\r\n  return new Response(JSON.stringify(\u6570\u636E), {\r\n    status: \u72B6\u6001\u7801,\r\n    headers: {\r\n      \"Content-Type\": \"application/json;charset=utf-8\",\r\n      \"Cache-Control\": \"no-store, no-cache, must-revalidate, max-age=0\",\r\n      ...\u989D\u5916\u5934\r\n    }\r\n  });\r\n}\r\n\r\nfunction \u751F\u6210UUID() {\r\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\r\n    const r = Math.random() * 16 | 0, v = c === 'x' ? r : (r & 0x3 | 0x8);\r\n    return v.toString(16);\r\n  });\r\n}\r\n\r\nasync function \u52A0\u5BC6\u5BC6\u7801(\u5BC6\u7801) {\r\n  const encoder = new TextEncoder();\r\n  const data = encoder.encode(\u5BC6\u7801);\r\n  const hashBuffer = await crypto.subtle.digest('SHA-256', data);\r\n  const hashArray = Array.from(new Uint8Array(hashBuffer));\r\n  return hashArray.map(b => b.toString(16).padStart(2, '0')).join('');\r\n}\r\n\r\nasync function \u68C0\u67E5\u9501\u5B9A(env, \u8BBE\u5907\u6807\u8BC6) {\r\n  const \u9501\u5B9A\u65F6\u95F4\u6233 = await env.KV\u6570\u636E\u5E93.get(`lock_${\u8BBE\u5907\u6807\u8BC6}`);\r\n  const \u5F53\u524D\u65F6\u95F4 = Date.now();\r\n  const \u88AB\u9501\u5B9A = \u9501\u5B9A\u65F6\u95F4\u6233 && \u5F53\u524D\u65F6\u95F4 < Number(\u9501\u5B9A\u65F6\u95F4\u6233);\r\n  return {\r\n    \u88AB\u9501\u5B9A,\r\n    \u5269\u4F59\u65F6\u95F4: \u88AB\u9501\u5B9A ? Math.ceil((Number(\u9501\u5B9A\u65F6\u95F4\u6233) - \u5F53\u524D\u65F6\u95F4) / 1000) : 0\r\n  };\r\n}\r\n\r\nfunction \u751F\u6210\u767B\u5F55\u6CE8\u518C\u754C\u9762(\u7C7B\u578B, \u989D\u5916\u53C2\u6570 = {}) {\r\n  const \u754C\u9762\u6570\u636E = {\r\n    \u6CE8\u518C: {\r\n      title: '\uD83C\uDF38\u9996\u6B21\u4F7F\u7528\u6CE8\u518C\uD83C\uDF38',\r\n      \u8868\u5355: `\r\n        <form class=\"auth-form\" action=\"/register/submit\" method=\"POST\" enctype=\"application/x-www-form-urlencoded\">\r\n          <input type=\"text\" name=\"username\" placeholder=\"\u8BBE\u7F6E\u8D26\u53F7\" required pattern=\"^[a-zA-Z0-9]{4,20}$\" title=\"4-20\u4F4D\u5B57\u6BCD\u6570\u5B57\">\r\n          <input type=\"password\" name=\"password\" placeholder=\"\u8BBE\u7F6E\u5BC6\u7801\" required minlength=\"6\">\r\n          <input type=\"password\" name=\"confirm\" placeholder=\"\u786E\u8BA4\u5BC6\u7801\" required>\r\n          <button type=\"submit\">\u7ACB\u5373\u6CE8\u518C</button>\r\n        </form>\r\n        ${\u989D\u5916\u53C2\u6570.\u9519\u8BEF\u4FE1\u606F ? `<div class=\"error-message\">${\u989D\u5916\u53C2\u6570.\u9519\u8BEF\u4FE1\u606F}</div>` : ''}\r\n      `\r\n    },\r\n    \u767B\u5F55: {\r\n      title: '\uD83C\uDF38\u6B22\u8FCE\u56DE\u6765\uD83C\uDF38',\r\n      \u8868\u5355: `\r\n        <form class=\"auth-form\" action=\"/login/submit\" method=\"POST\" enctype=\"application/x-www-form-urlencoded\">\r\n          <input type=\"text\" name=\"username\" placeholder=\"\u767B\u5F55\u8D26\u53F7\" required>\r\n          <input type=\"password\" name=\"password\" placeholder=\"\u767B\u5F55\u5BC6\u7801\" required>\r\n          <button type=\"submit\" id=\"loginButton\" ${\u989D\u5916\u53C2\u6570.\u9501\u5B9A\u72B6\u6001 ? 'disabled' : ''}>\u7ACB\u5373\u767B\u5F55</button>\r\n        </form>\r\n        ${\u989D\u5916\u53C2\u6570.\u8F93\u9519\u5BC6\u7801 ? `<div class=\"error-message\">\u5BC6\u7801\u9519\u8BEF\uFF0C\u5269\u4F59\u5C1D\u8BD5\u6B21\u6570\uFF1A${\u989D\u5916\u53C2\u6570.\u5269\u4F59\u6B21\u6570}</div>` : ''}\r\n        ${\u989D\u5916\u53C2\u6570.\u9501\u5B9A\u72B6\u6001 ? `\r\n          <div class=\"lock-message\">\r\n            \u8D26\u6237\u9501\u5B9A\uFF0C\u8BF7<span id=\"countdown\">${\u989D\u5916\u53C2\u6570.\u5269\u4F59\u65F6\u95F4}</span>\u79D2\u540E\u91CD\u8BD5\r\n          </div>` : ''}\r\n        ${\u989D\u5916\u53C2\u6570.\u9519\u8BEF\u4FE1\u606F ? `<div class=\"error-message\">${\u989D\u5916\u53C2\u6570.\u9519\u8BEF\u4FE1\u606F}</div>` : ''}\r\n      `\r\n    }\r\n  };\r\n\r\n  return `\r\n<!DOCTYPE html>\r\n<html>\r\n<head>\r\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n  <style>\r\n    @import url('https://fonts.googleapis.com/css2?family=Quicksand:wght@400;500;600;700&display=swap');\r\n    \r\n    body {\r\n      font-family: 'Quicksand', 'Comic Sans MS', 'Arial', sans-serif;\r\n      color: #ff6f91;\r\n      margin: 0;\r\n      height: 100vh;\r\n      display: flex;\r\n      justify-content: center;\r\n      align-items: center;\r\n      position: relative;\r\n      overflow: hidden;\r\n      transition: background 0.5s ease;\r\n    }\r\n    \r\n    @media (prefers-color-scheme: light) {\r\n      body { background: linear-gradient(135deg, #ffe6f0, #fff0f5); }\r\n      .auth-container { background: rgba(255, 245, 247, 0.9); box-shadow: 0 8px 20px rgba(255, 182, 193, 0.3); }\r\n      .floating-petals { background: rgba(255, 255, 255, 0.7); }\r\n    }\r\n    \r\n    @media (prefers-color-scheme: dark) {\r\n      body { background: linear-gradient(135deg, #1e1e2f, #2a2a3b); }\r\n      .auth-container { background: rgba(30, 30, 30, 0.9); color: #ffd1dc; box-shadow: 0 8px 20px rgba(255, 133, 162, 0.2); }\r\n      .floating-petals { background: rgba(255, 255, 255, 0.1); }\r\n    }\r\n    \r\n    .background-media {\r\n      position: fixed;\r\n      top: 0;\r\n      left: 0;\r\n      width: 100%;\r\n      height: 100%;\r\n      object-fit: cover;\r\n      z-index: -1;\r\n      transition: opacity 0.5s ease;\r\n    }\r\n    \r\n    /* \u6F02\u6D6E\u82B1\u74E3\u6548\u679C */\r\n    .floating-petals {\r\n      position: fixed;\r\n      top: 0;\r\n      left: 0;\r\n      width: 100%;\r\n      height: 100%;\r\n      pointer-events: none;\r\n      z-index: 0;\r\n      overflow: hidden;\r\n    }\r\n    \r\n    .petal {\r\n      position: absolute;\r\n      width: 10px;\r\n      height: 10px;\r\n      border-radius: 50% 0;\r\n      opacity: 0.7;\r\n      animation: float linear infinite;\r\n    }\r\n    \r\n    @keyframes float {\r\n      0% {\r\n        transform: translateY(0) rotate(0deg);\r\n        opacity: 0.7;\r\n      }\r\n      100% {\r\n        transform: translateY(100vh) rotate(360deg);\r\n        opacity: 0;\r\n      }\r\n    }\r\n    \r\n    /* \u53EF\u7231\u88C5\u9970\u5143\u7D20 */\r\n    .cute-decoration {\r\n      position: absolute;\r\n      width: 60px;\r\n      height: 60px;\r\n      opacity: 0.8;\r\n      z-index: 0;\r\n      animation: bounce 3s infinite alternate ease-in-out;\r\n    }\r\n    \r\n    .cute-decoration:nth-child(odd) {\r\n      animation-delay: 0.5s;\r\n    }\r\n    \r\n    @keyframes bounce {\r\n      0%, 100% {\r\n        transform: translateY(0);\r\n      }\r\n      50% {\r\n        transform: translateY(-20px);\r\n      }\r\n    }\r\n    \r\n    .auth-container {\r\n      padding: 40px;\r\n      border-radius: 30px;\r\n      max-width: 400px;\r\n      width: 90%;\r\n      text-align: center;\r\n      position: relative;\r\n      z-index: 1;\r\n      backdrop-filter: blur(10px);\r\n      animation: fadeIn 0.8s ease-out;\r\n    }\r\n    \r\n    @keyframes fadeIn {\r\n      from {\r\n        opacity: 0;\r\n        transform: translateY(30px);\r\n      }\r\n      to {\r\n        opacity: 1;\r\n        transform: translateY(0);\r\n      }\r\n    }\r\n    \r\n    h1 {\r\n      font-size: 2em;\r\n      color: #ff69b4;\r\n      margin-bottom: 30px;\r\n      text-shadow: 2px 2px 4px rgba(255, 105, 180, 0.3);\r\n      animation: pulse 2s infinite alternate;\r\n    }\r\n    \r\n    @keyframes pulse {\r\n      0% {\r\n        transform: scale(1);\r\n      }\r\n      100% {\r\n        transform: scale(1.05);\r\n      }\r\n    }\r\n    \r\n    .auth-form {\r\n      display: flex;\r\n      flex-direction: column;\r\n      gap: 20px;\r\n      width: 100%;\r\n      max-width: 300px;\r\n      margin: 0 auto;\r\n    }\r\n    \r\n    .auth-form input {\r\n      padding: 15px;\r\n      border-radius: 25px;\r\n      border: 2px solid #ffb6c1;\r\n      font-size: 1em;\r\n      width: 100%;\r\n      box-sizing: border-box;\r\n      transition: all 0.3s ease;\r\n      background-color: rgba(255, 255, 255, 0.7);\r\n    }\r\n    \r\n    .auth-form input:focus {\r\n      border-color: #ff69b4;\r\n      box-shadow: 0 0 10px rgba(255, 105, 180, 0.3);\r\n      transform: scale(1.02);\r\n      outline: none;\r\n    }\r\n    \r\n    .auth-form button {\r\n      padding: 15px;\r\n      background: linear-gradient(to right, #ffb6c1, #ff69b4);\r\n      color: white;\r\n      border: none;\r\n      border-radius: 30px;\r\n      cursor: pointer;\r\n      font-size: 1.1em;\r\n      font-weight: bold;\r\n      transition: all 0.3s ease;\r\n      position: relative;\r\n      overflow: hidden;\r\n    }\r\n    \r\n    .auth-form button:before {\r\n      content: '';\r\n      position: absolute;\r\n      top: 0;\r\n      left: -100%;\r\n      width: 100%;\r\n      height: 100%;\r\n      background: linear-gradient(to right, transparent, rgba(255, 255, 255, 0.3), transparent);\r\n      transition: left 0.5s;\r\n    }\r\n    \r\n    .auth-form button:hover:before {\r\n      left: 100%;\r\n    }\r\n    \r\n    .auth-form button:hover {\r\n      transform: scale(1.05);\r\n      box-shadow: 0 8px 20px rgba(255, 105, 180, 0.4);\r\n    }\r\n    \r\n    .auth-form button:active {\r\n      transform: scale(0.98);\r\n    }\r\n    \r\n    .auth-form button:disabled {\r\n      background: #ccc;\r\n      cursor: not-allowed;\r\n      box-shadow: none;\r\n      transform: none;\r\n    }\r\n    \r\n    .error-message {\r\n      color: #ff6666;\r\n      margin-top: 20px;\r\n      font-size: 0.9em;\r\n      animation: shake 0.5s;\r\n    }\r\n    \r\n    @keyframes shake {\r\n      0%, 100% { transform: translateX(0); }\r\n      10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }\r\n      20%, 40%, 60%, 80% { transform: translateX(5px); }\r\n    }\r\n    \r\n    .lock-message {\r\n      color: #ff6666;\r\n      margin-top: 20px;\r\n      font-size: 1.1em;\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: center;\r\n      gap: 5px;\r\n    }\r\n    \r\n    #countdown {\r\n      color: #ff1493;\r\n      font-weight: bold;\r\n      min-width: 50px;\r\n      text-align: center;\r\n      animation: pulse 1s infinite alternate;\r\n    }\r\n    \r\n    /* \u53EF\u7231\u56FE\u6807 */\r\n    .cute-icon {\r\n      position: absolute;\r\n      font-size: 1.5em;\r\n      animation: float-icon 3s infinite ease-in-out;\r\n    }\r\n    \r\n    .cute-icon:nth-child(1) {\r\n      top: -20px;\r\n      left: 20px;\r\n      animation-delay: 0.2s;\r\n    }\r\n    \r\n    .cute-icon:nth-child(2) {\r\n      top: -20px;\r\n      right: 20px;\r\n      animation-delay: 0.7s;\r\n    }\r\n    \r\n    @keyframes float-icon {\r\n      0%, 100% {\r\n        transform: translateY(0) rotate(0deg);\r\n      }\r\n      50% {\r\n        transform: translateY(-10px) rotate(10deg);\r\n      }\r\n    }\r\n    \r\n    @media (max-width: 600px) {\r\n      .auth-container { padding: 25px; }\r\n      h1 { font-size: 1.7em; }\r\n      .auth-form input, .auth-form button { padding: 12px; font-size: 1em; }\r\n    }\r\n  </style>\r\n</head>\r\n<body>\r\n  <img id=\"backgroundImage\" class=\"background-media\">\r\n  <div class=\"floating-petals\" id=\"petalsContainer\"></div>\r\n  \r\n  <div class=\"auth-container\">\r\n    <div class=\"cute-icon\">\uD83C\uDF38</div>\r\n    <div class=\"cute-icon\">\uD83C\uDF3A</div>\r\n    <h1>${\u754C\u9762\u6570\u636E[\u7C7B\u578B].title}</h1>\r\n    ${\u754C\u9762\u6570\u636E[\u7C7B\u578B].\u8868\u5355}\r\n  </div>\r\n  \r\n  <script>\r\n    // \u80CC\u666F\u56FE\u7247\u5207\u6362\r\n    const lightBg = '${\u9ED8\u8BA4\u767D\u5929\u80CC\u666F\u56FE}';\r\n    const darkBg = '${\u9ED8\u8BA4\u6697\u9ED1\u80CC\u666F\u56FE}';\r\n    const bgImage = document.getElementById('backgroundImage');\r\n\r\n    function updateBackground() {\r\n      const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches;\r\n      // \u4F7F\u7528\u81EA\u5B9A\u4E49\u58C1\u7EB8\u6216\u9ED8\u8BA4\u58C1\u7EB8\r\n      const customLightBg = document.getElementById('lightWallpaperInput')?.value.trim();\r\n      const customDarkBg = document.getElementById('darkWallpaperInput')?.value.trim();\r\n      const currentLightBg = customLightBg || lightBg;\r\n      const currentDarkBg = customDarkBg || darkBg;\r\n      bgImage.src = isDarkMode ? currentDarkBg : currentLightBg;\r\n      bgImage.onerror = () => { bgImage.style.display = 'none'; };\r\n    }\r\n    updateBackground();\r\n    window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', updateBackground);\r\n\r\n    // \u521B\u5EFA\u6F02\u6D6E\u82B1\u74E3\u6548\u679C\r\n    function createPetal() {\r\n      const petalsContainer = document.getElementById('petalsContainer');\r\n      const petal = document.createElement('div');\r\n      petal.className = 'petal';\r\n      \r\n      // \u968F\u673A\u82B1\u74E3\u989C\u8272\r\n      const colors = ['#ffb6c1', '#ff69b4', '#ffc0cb', '#ff1493', '#ffd1dc'];\r\n      const color = colors[Math.floor(Math.random() * colors.length)];\r\n      \r\n      // \u968F\u673A\u5927\u5C0F\r\n      const size = Math.random() * 15 + 5;\r\n      \r\n      // \u968F\u673A\u4F4D\u7F6E\r\n      const left = Math.random() * 100;\r\n      \r\n      // \u968F\u673A\u52A8\u753B\u65F6\u957F\r\n      const duration = Math.random() * 10 + 10;\r\n      \r\n      petal.style.backgroundColor = color;\r\n      petal.style.width = size + 'px';\r\n      petal.style.height = size + 'px';\r\n      petal.style.left = left + '%';\r\n      petal.style.animationDuration = duration + 's';\r\n      \r\n      petalsContainer.appendChild(petal);\r\n      \r\n      // \u52A8\u753B\u7ED3\u675F\u540E\u79FB\u9664\u82B1\u74E3\r\n      setTimeout(() => {\r\n        petal.remove();\r\n      }, duration * 1000);\r\n    }\r\n    \r\n    // \u5B9A\u671F\u521B\u5EFA\u82B1\u74E3\r\n    setInterval(createPetal, 500);\r\n    \r\n    // \u521D\u59CB\u521B\u5EFA\u4E00\u4E9B\u82B1\u74E3\r\n    for (let i = 0; i < 20; i++) {\r\n      setTimeout(createPetal, i * 200);\r\n    }\r\n\r\n    // \u5012\u8BA1\u65F6\u903B\u8F91\r\n    let remainingTime = ${(\u989D\u5916\u53C2\u6570.\u9501\u5B9A\u72B6\u6001 ? \u989D\u5916\u53C2\u6570.\u5269\u4F59\u65F6\u95F4 : 0)};\r\n    const countdownElement = document.getElementById('countdown');\r\n    const loginButton = document.getElementById('loginButton');\r\n\r\n    function startCountdown() {\r\n      if (!countdownElement) return;\r\n\r\n      const interval = setInterval(() => {\r\n        if (remainingTime <= 0) {\r\n          clearInterval(interval);\r\n          countdownElement.textContent = '0';\r\n          loginButton.disabled = false;\r\n          document.querySelector('.lock-message').textContent = '\u9501\u5B9A\u5DF2\u89E3\u9664\uFF0C\u8BF7\u91CD\u65B0\u5C1D\u8BD5\u767B\u5F55';\r\n          fetch('/reset-login-failures', { method: 'POST' });\r\n          return;\r\n        }\r\n        countdownElement.textContent = remainingTime;\r\n        remainingTime--;\r\n      }, 1000);\r\n    }\r\n\r\n    function syncWithServer() {\r\n      fetch('/check-lock')\r\n        .then(response => response.json())\r\n        .then(data => {\r\n          if (data.locked) {\r\n            remainingTime = data.remainingTime;\r\n            countdownElement.textContent = remainingTime;\r\n            loginButton.disabled = true;\r\n          } else {\r\n            remainingTime = 0;\r\n            countdownElement.textContent = '0';\r\n            loginButton.disabled = false;\r\n            document.querySelector('.lock-message').textContent = '\u9501\u5B9A\u5DF2\u89E3\u9664\uFF0C\u8BF7\u91CD\u65B0\u5C1D\u8BD5\u767B\u5F55';\r\n          }\r\n        })\r\n        .catch(error => {\r\n          console.error('\u540C\u6B65\u9501\u5B9A\u72B6\u6001\u5931\u8D25:', error);\r\n        });\r\n    }\r\n\r\n    if (${\u989D\u5916\u53C2\u6570.\u9501\u5B9A\u72B6\u6001 ? 'true' : 'false'}) {\r\n      startCountdown();\r\n      setInterval(syncWithServer, 10000);\r\n      document.addEventListener('visibilitychange', () => {\r\n        if (document.visibilityState === 'visible') {\r\n          syncWithServer();\r\n        }\r\n      });\r\n    }\r\n\r\n    // \u9632\u6B62 UA \u5207\u6362\u89E6\u53D1\u8868\u5355\u63D0\u4EA4\r\n    document.querySelector('.auth-form')?.addEventListener('submit', function(event) {\r\n      if (!event.isTrusted) {\r\n        event.preventDefault();\r\n        console.log('\u963B\u6B62\u975E\u7528\u6237\u89E6\u53D1\u7684\u8868\u5355\u63D0\u4EA4');\r\n      }\r\n    });\r\n\r\n    // \u76D1\u542C UA \u53D8\u5316\u5E76\u5E73\u6ED1\u5904\u7406\r\n    let lastUA = navigator.userAgent;\r\n    function checkUAChange() {\r\n      const currentUA = navigator.userAgent;\r\n      if (currentUA !== lastUA) {\r\n        console.log('UA \u5DF2\u5207\u6362\uFF0C\u4ECE', lastUA, '\u5230', currentUA);\r\n        lastUA = currentUA;\r\n      }\r\n    }\r\n    setInterval(checkUAChange, 500);\r\n    \r\n    // \u6DFB\u52A0\u8F93\u5165\u6846\u805A\u7126\u6548\u679C\r\n    const inputs = document.querySelectorAll('.auth-form input');\r\n    inputs.forEach(input => {\r\n      input.addEventListener('focus', function() {\r\n        this.parentElement.style.transform = 'scale(1.02)';\r\n      });\r\n      \r\n      input.addEventListener('blur', function() {\r\n        this.parentElement.style.transform = 'scale(1)';\r\n      });\r\n    });\r\n  </script>\r\n</body>\r\n</html>\r\n  `;\r\n}\r\n\r\n// ====================== \u8282\u70B9\u914D\u7F6E\u76F8\u5173 ======================\r\nasync function \u83B7\u53D6\u6216\u521D\u59CB\u5316UUID(env) {\r\n  let uuid = await env.KV\u6570\u636E\u5E93.get('current_uuid');\r\n  if (!uuid) {\r\n    uuid = \u751F\u6210UUID();\r\n    await env.KV\u6570\u636E\u5E93.put('current_uuid', uuid);\r\n  }\r\n  return uuid;\r\n}\r\n\r\nasync function \u83B7\u53D6\u58C1\u7EB8\u5730\u5740(env) {\r\n  const \u767D\u5929\u58C1\u7EB8 = await env.KV\u6570\u636E\u5E93.get('custom_light_bg');\r\n  const \u6697\u9ED1\u58C1\u7EB8 = await env.KV\u6570\u636E\u5E93.get('custom_dark_bg');\r\n  \r\n  return {\r\n    \u767D\u5929: \u767D\u5929\u58C1\u7EB8 || \u9ED8\u8BA4\u767D\u5929\u80CC\u666F\u56FE,\r\n    \u6697\u9ED1: \u6697\u9ED1\u58C1\u7EB8 || \u9ED8\u8BA4\u6697\u9ED1\u80CC\u666F\u56FE\r\n  };\r\n}\r\n\r\nasync function \u52A0\u8F7D\u8282\u70B9\u548C\u914D\u7F6E(env, hostName) {\r\n  try {\r\n    const \u8282\u70B9\u8DEF\u5F84\u7F13\u5B58 = await env.KV\u6570\u636E\u5E93.get('node_file_paths');\r\n    let \u8282\u70B9\u6587\u4EF6\u8DEF\u5F84 = \u8282\u70B9\u8DEF\u5F84\u7F13\u5B58 \r\n      ? JSON.parse(\u8282\u70B9\u8DEF\u5F84\u7F13\u5B58) \r\n      : ['https://raw.githubusercontent.com/Alien-Et/SakuraPanel/refs/heads/main/ips.txt', 'https://raw.githubusercontent.com/Alien-Et/SakuraPanel/refs/heads/main/url.txt'];\r\n\r\n    const \u624B\u52A8\u8282\u70B9\u7F13\u5B58 = await env.KV\u6570\u636E\u5E93.get('manual_preferred_ips');\r\n    let \u624B\u52A8\u8282\u70B9\u5217\u8868 = [];\r\n    if (\u624B\u52A8\u8282\u70B9\u7F13\u5B58) {\r\n      \u624B\u52A8\u8282\u70B9\u5217\u8868 = JSON.parse(\u624B\u52A8\u8282\u70B9\u7F13\u5B58).map(line => line.trim()).filter(Boolean);\r\n    }\r\n\r\n    const \u54CD\u5E94\u5217\u8868 = await Promise.all(\r\n      \u8282\u70B9\u6587\u4EF6\u8DEF\u5F84.map(async (\u8DEF\u5F84) => {\r\n        try {\r\n          const \u54CD\u5E94 = await fetch(\u8DEF\u5F84);\r\n          if (!\u54CD\u5E94.ok) throw new Error(`\u8BF7\u6C42 ${\u8DEF\u5F84} \u5931\u8D25\uFF0C\u72B6\u6001\u7801: ${\u54CD\u5E94.status}`);\r\n          const \u6587\u672C = await \u54CD\u5E94.text();\r\n          return \u6587\u672C.split('\\n').map(line => line.trim()).filter(Boolean);\r\n        } catch (\u9519\u8BEF) {\r\n          console.error(`\u62C9\u53D6 ${\u8DEF\u5F84} \u5931\u8D25: ${\u9519\u8BEF.message}`);\r\n          return [];\r\n        }\r\n      })\r\n    );\r\n\r\n    const \u57DF\u540D\u8282\u70B9\u5217\u8868 = [...new Set(\u54CD\u5E94\u5217\u8868.flat())];\r\n    const \u5408\u5E76\u8282\u70B9\u5217\u8868 = [...new Set([...\u624B\u52A8\u8282\u70B9\u5217\u8868, ...\u57DF\u540D\u8282\u70B9\u5217\u8868])];\r\n    const \u7F13\u5B58\u8282\u70B9 = await env.KV\u6570\u636E\u5E93.get('ip_preferred_ips');\r\n    const \u5F53\u524D\u8282\u70B9\u5217\u8868 = \u7F13\u5B58\u8282\u70B9 ? JSON.parse(\u7F13\u5B58\u8282\u70B9) : [];\r\n    const \u5217\u8868\u76F8\u540C = JSON.stringify(\u5408\u5E76\u8282\u70B9\u5217\u8868) === JSON.stringify(\u5F53\u524D\u8282\u70B9\u5217\u8868);\r\n\r\n    if (\u5408\u5E76\u8282\u70B9\u5217\u8868.length > 0) {\r\n      \u4F18\u9009\u8282\u70B9 = \u5408\u5E76\u8282\u70B9\u5217\u8868;\r\n      if (!\u5217\u8868\u76F8\u540C) {\r\n        const \u65B0\u7248\u672C = String(Date.now());\r\n        await env.KV\u6570\u636E\u5E93.put('ip_preferred_ips', JSON.stringify(\u5408\u5E76\u8282\u70B9\u5217\u8868));\r\n        await env.KV\u6570\u636E\u5E93.put('ip_preferred_ips_version', \u65B0\u7248\u672C);\r\n        await env.KV\u6570\u636E\u5E93.put('config_' + atob('Y2xhc2g='), await \u751F\u6210\u732B\u54AA(env, hostName));\r\n        await env.KV\u6570\u636E\u5E93.put('config_' + atob('Y2xhc2g=') + '_version', \u65B0\u7248\u672C);\r\n        await env.KV\u6570\u636E\u5E93.put('config_' + atob('djJyYXk='), await \u751F\u6210\u901A\u7528(env, hostName));\r\n        await env.KV\u6570\u636E\u5E93.put('config_' + atob('djJyYXk=') + '_version', \u65B0\u7248\u672C);\r\n      }\r\n    } else {\r\n      \u4F18\u9009\u8282\u70B9 = \u5F53\u524D\u8282\u70B9\u5217\u8868.length > 0 ? \u5F53\u524D\u8282\u70B9\u5217\u8868 : [`${hostName}:443`];\r\n    }\r\n\r\n    await env.KV\u6570\u636E\u5E93.put('node_file_paths', JSON.stringify(\u8282\u70B9\u6587\u4EF6\u8DEF\u5F84));\r\n  } catch (\u9519\u8BEF) {\r\n    const \u7F13\u5B58\u8282\u70B9 = await env.KV\u6570\u636E\u5E93.get('ip_preferred_ips');\r\n    \u4F18\u9009\u8282\u70B9 = \u7F13\u5B58\u8282\u70B9 ? JSON.parse(\u7F13\u5B58\u8282\u70B9) : [`${hostName}:443`];\r\n    await env.KV\u6570\u636E\u5E93.put('ip_error_log', JSON.stringify({ time: Date.now(), error: '\u6240\u6709\u8DEF\u5F84\u62C9\u53D6\u5931\u8D25\u6216\u624B\u52A8\u4E0A\u4F20\u4E3A\u7A7A' }), { expirationTtl: 86400 });\r\n  }\r\n}\r\n\r\nasync function \u83B7\u53D6\u914D\u7F6E(env, \u7C7B\u578B, hostName) {\r\n  const \u7F13\u5B58\u952E = \u7C7B\u578B === atob('Y2xhc2g=') ? 'config_' + atob('Y2xhc2g=') : 'config_' + atob('djJyYXk=');\r\n  const \u7248\u672C\u952E = `${\u7F13\u5B58\u952E}_version`;\r\n  const \u7F13\u5B58\u914D\u7F6E = await env.KV\u6570\u636E\u5E93.get(\u7F13\u5B58\u952E);\r\n  const \u914D\u7F6E\u7248\u672C = await env.KV\u6570\u636E\u5E93.get(\u7248\u672C\u952E) || '0';\r\n  const \u8282\u70B9\u7248\u672C = await env.KV\u6570\u636E\u5E93.get('ip_preferred_ips_version') || '0';\r\n\r\n  if (\u7F13\u5B58\u914D\u7F6E && \u914D\u7F6E\u7248\u672C === \u8282\u70B9\u7248\u672C) {\r\n    return \u7F13\u5B58\u914D\u7F6E;\r\n  }\r\n\r\n  const \u65B0\u914D\u7F6E = \u7C7B\u578B === atob('Y2xhc2g=') ? await \u751F\u6210\u732B\u54AA(env, hostName) : await \u751F\u6210\u901A\u7528(env, hostName);\r\n  await env.KV\u6570\u636E\u5E93.put(\u7F13\u5B58\u952E, \u65B0\u914D\u7F6E);\r\n  await env.KV\u6570\u636E\u5E93.put(\u7248\u672C\u952E, \u8282\u70B9\u7248\u672C);\r\n  return \u65B0\u914D\u7F6E;\r\n}\r\n\r\n// ====================== \u4E3B\u903B\u8F91 ======================\r\nexport default {\r\n  async fetch(\u8BF7\u6C42, env) {\r\n    try {\r\n      if (!env.KV\u6570\u636E\u5E93) {\r\n        return \u521B\u5EFAHTML\u54CD\u5E94(\u751F\u6210KV\u672A\u7ED1\u5B9A\u63D0\u793A\u9875\u9762());\r\n      }\r\n\r\n      const \u8BF7\u6C42\u5934 = \u8BF7\u6C42.headers.get('Upgrade');\r\n      const url = new URL(\u8BF7\u6C42.url);\r\n      const hostName = \u8BF7\u6C42.headers.get('Host');\r\n      const UA = \u8BF7\u6C42.headers.get('User-Agent') || 'unknown';\r\n      const IP = \u8BF7\u6C42.headers.get('CF-Connecting-IP') || 'unknown';\r\n      const \u8BBE\u5907\u6807\u8BC6 = `${UA}_${IP}`;\r\n      let formData;\r\n\r\n      if (\u8BF7\u6C42\u5934 && \u8BF7\u6C42\u5934 === 'websocket') {\r\n        \u53CD\u4EE3\u5730\u5740 = env.PROXYIP || \u53CD\u4EE3\u5730\u5740;\r\n        SOCKS5\u8D26\u53F7 = env.SOCKS5 || SOCKS5\u8D26\u53F7;\r\n        return await \u5347\u7EA7\u8BF7\u6C42(\u8BF7\u6C42, env);\r\n      }\r\n\r\n      if (url.pathname === '/login/submit' || url.pathname === '/register/submit') {\r\n        const contentType = \u8BF7\u6C42.headers.get('Content-Type') || '';\r\n        if (!contentType.includes('application/x-www-form-urlencoded') && !contentType.includes('multipart/form-data')) {\r\n          console.log(`\u65E0\u6548\u8BF7\u6C42: UA=${UA}, IP=${IP}, Path=${url.pathname}, Headers=${JSON.stringify([...\u8BF7\u6C42.headers])}`);\r\n          return \u521B\u5EFAHTML\u54CD\u5E94(\u751F\u6210\u767B\u5F55\u6CE8\u518C\u754C\u9762(url.pathname === '/login/submit' ? '\u767B\u5F55' : '\u6CE8\u518C', {\r\n            \u9519\u8BEF\u4FE1\u606F: '\u8BF7\u901A\u8FC7\u6B63\u5E38\u8868\u5355\u63D0\u4EA4'\r\n          }), 400);\r\n        }\r\n\r\n        try {\r\n          formData = await \u8BF7\u6C42.formData();\r\n        } catch (\u9519\u8BEF) {\r\n          return \u521B\u5EFAHTML\u54CD\u5E94(\u751F\u6210\u767B\u5F55\u6CE8\u518C\u754C\u9762(url.pathname === '/login/submit' ? '\u767B\u5F55' : '\u6CE8\u518C', {\r\n            \u9519\u8BEF\u4FE1\u606F: '\u63D0\u4EA4\u6570\u636E\u683C\u5F0F\u9519\u8BEF\uFF0C\u8BF7\u91CD\u8BD5'\r\n          }), 400);\r\n        }\r\n      }\r\n\r\n      if (url.pathname === '/register/submit') {\r\n        const \u7528\u6237\u540D = formData.get('username');\r\n        const \u5BC6\u7801 = formData.get('password');\r\n        const \u786E\u8BA4\u5BC6\u7801 = formData.get('confirm');\r\n\r\n        if (!\u7528\u6237\u540D || !\u5BC6\u7801 || \u5BC6\u7801 !== \u786E\u8BA4\u5BC6\u7801) {\r\n          return \u521B\u5EFAHTML\u54CD\u5E94(\u751F\u6210\u767B\u5F55\u6CE8\u518C\u754C\u9762('\u6CE8\u518C', { \r\n            \u9519\u8BEF\u4FE1\u606F: \u5BC6\u7801 !== \u786E\u8BA4\u5BC6\u7801 ? '\u4E24\u6B21\u5BC6\u7801\u4E0D\u4E00\u81F4' : '\u8BF7\u586B\u5199\u5B8C\u6574\u4FE1\u606F'\r\n          }), 400);\r\n        }\r\n\r\n        const \u5DF2\u6709\u7528\u6237 = await env.KV\u6570\u636E\u5E93.get('stored_credentials');\r\n        if (\u5DF2\u6709\u7528\u6237) {\r\n          return \u521B\u5EFA\u91CD\u5B9A\u5411\u54CD\u5E94('/login');\r\n        }\r\n\r\n        const \u52A0\u5BC6\u5BC6\u7801\u503C = await \u52A0\u5BC6\u5BC6\u7801(\u5BC6\u7801);\r\n        await env.KV\u6570\u636E\u5E93.put('stored_credentials', JSON.stringify({\r\n          \u7528\u6237\u540D, \u5BC6\u7801: \u52A0\u5BC6\u5BC6\u7801\u503C\r\n        }));\r\n\r\n        const \u65B0Token = Math.random().toString(36).substring(2);\r\n        await env.KV\u6570\u636E\u5E93.put('current_token', \u65B0Token, { expirationTtl: 300 });\r\n        return \u521B\u5EFA\u91CD\u5B9A\u5411\u54CD\u5E94(`/${\u914D\u7F6E\u8DEF\u5F84}`, { \r\n          'Set-Cookie': `token=${\u65B0Token}; Path=/; HttpOnly; SameSite=Strict` \r\n        });\r\n      }\r\n\r\n      if (url.pathname === '/login/submit') {\r\n        const \u9501\u5B9A\u72B6\u6001 = await \u68C0\u67E5\u9501\u5B9A(env, \u8BBE\u5907\u6807\u8BC6);\r\n        if (\u9501\u5B9A\u72B6\u6001.\u88AB\u9501\u5B9A) {\r\n          return \u521B\u5EFAHTML\u54CD\u5E94(\u751F\u6210\u767B\u5F55\u6CE8\u518C\u754C\u9762('\u767B\u5F55', {\r\n            \u9501\u5B9A\u72B6\u6001: true,\r\n            \u5269\u4F59\u65F6\u95F4: \u9501\u5B9A\u72B6\u6001.\u5269\u4F59\u65F6\u95F4\r\n          }), 403);\r\n        }\r\n\r\n        const \u5B58\u50A8\u51ED\u636E = await env.KV\u6570\u636E\u5E93.get('stored_credentials');\r\n        if (!\u5B58\u50A8\u51ED\u636E) {\r\n          return \u521B\u5EFA\u91CD\u5B9A\u5411\u54CD\u5E94('/register');\r\n        }\r\n\r\n        const \u8F93\u5165\u7528\u6237\u540D = formData.get('username');\r\n        const \u8F93\u5165\u5BC6\u7801 = formData.get('password');\r\n\r\n        const \u51ED\u636E\u5BF9\u8C61 = JSON.parse(\u5B58\u50A8\u51ED\u636E || '{}');\r\n        const \u5BC6\u7801\u5339\u914D = (await \u52A0\u5BC6\u5BC6\u7801(\u8F93\u5165\u5BC6\u7801)) === \u51ED\u636E\u5BF9\u8C61.\u5BC6\u7801;\r\n        if (\u8F93\u5165\u7528\u6237\u540D === \u51ED\u636E\u5BF9\u8C61.\u7528\u6237\u540D && \u5BC6\u7801\u5339\u914D) {\r\n          const \u65B0Token = Math.random().toString(36).substring(2);\r\n          await env.KV\u6570\u636E\u5E93.put('current_token', \u65B0Token, { expirationTtl: 300 });\r\n          await env.KV\u6570\u636E\u5E93.put(`fail_${\u8BBE\u5907\u6807\u8BC6}`, '0');\r\n          return \u521B\u5EFA\u91CD\u5B9A\u5411\u54CD\u5E94(`/${\u914D\u7F6E\u8DEF\u5F84}`, { \r\n            'Set-Cookie': `token=${\u65B0Token}; Path=/; HttpOnly; SameSite=Strict` \r\n          });\r\n        }\r\n\r\n        let \u5931\u8D25\u6B21\u6570 = Number(await env.KV\u6570\u636E\u5E93.get(`fail_${\u8BBE\u5907\u6807\u8BC6}`) || 0) + 1;\r\n        await env.KV\u6570\u636E\u5E93.put(`fail_${\u8BBE\u5907\u6807\u8BC6}`, String(\u5931\u8D25\u6B21\u6570));\r\n\r\n        if (\u5931\u8D25\u6B21\u6570 >= \u6700\u5927\u5931\u8D25\u6B21\u6570) {\r\n          await env.KV\u6570\u636E\u5E93.put(`lock_${\u8BBE\u5907\u6807\u8BC6}`, String(Date.now() + \u9501\u5B9A\u65F6\u95F4), { expirationTtl: 300 });\r\n          const \u65B0\u9501\u5B9A\u72B6\u6001 = await \u68C0\u67E5\u9501\u5B9A(env, \u8BBE\u5907\u6807\u8BC6);\r\n          return \u521B\u5EFAHTML\u54CD\u5E94(\u751F\u6210\u767B\u5F55\u6CE8\u518C\u754C\u9762('\u767B\u5F55', {\r\n            \u9501\u5B9A\u72B6\u6001: true,\r\n            \u5269\u4F59\u65F6\u95F4: \u65B0\u9501\u5B9A\u72B6\u6001.\u5269\u4F59\u65F6\u95F4\r\n          }), 403);\r\n        }\r\n\r\n        return \u521B\u5EFAHTML\u54CD\u5E94(\u751F\u6210\u767B\u5F55\u6CE8\u518C\u754C\u9762('\u767B\u5F55', {\r\n          \u8F93\u9519\u5BC6\u7801: true,\r\n          \u5269\u4F59\u6B21\u6570: \u6700\u5927\u5931\u8D25\u6B21\u6570 - \u5931\u8D25\u6B21\u6570\r\n        }), 401);\r\n      }\r\n\r\n      const \u662F\u5426\u5DF2\u6CE8\u518C = await env.KV\u6570\u636E\u5E93.get('stored_credentials');\r\n      if (!\u662F\u5426\u5DF2\u6CE8\u518C && url.pathname !== '/register') {\r\n        return \u521B\u5EFAHTML\u54CD\u5E94(\u751F\u6210\u767B\u5F55\u6CE8\u518C\u754C\u9762('\u6CE8\u518C'));\r\n      }\r\n\r\n      switch (url.pathname) {\r\n        case '/login':\r\n          const \u5B58\u50A8\u51ED\u636E = await env.KV\u6570\u636E\u5E93.get('stored_credentials');\r\n          if (!\u5B58\u50A8\u51ED\u636E) {\r\n            return \u521B\u5EFA\u91CD\u5B9A\u5411\u54CD\u5E94('/register');\r\n          }\r\n\r\n          const \u9501\u5B9A\u72B6\u6001 = await \u68C0\u67E5\u9501\u5B9A(env, \u8BBE\u5907\u6807\u8BC6);\r\n          if (\u9501\u5B9A\u72B6\u6001.\u88AB\u9501\u5B9A) {\r\n            return \u521B\u5EFAHTML\u54CD\u5E94(\u751F\u6210\u767B\u5F55\u6CE8\u518C\u754C\u9762('\u767B\u5F55', { \u9501\u5B9A\u72B6\u6001: true, \u5269\u4F59\u65F6\u95F4: \u9501\u5B9A\u72B6\u6001.\u5269\u4F59\u65F6\u95F4 }));\r\n          }\r\n          if (\u8BF7\u6C42.headers.get('Cookie')?.split('=')[1] === await env.KV\u6570\u636E\u5E93.get('current_token')) {\r\n            return \u521B\u5EFA\u91CD\u5B9A\u5411\u54CD\u5E94(`/${\u914D\u7F6E\u8DEF\u5F84}`);\r\n          }\r\n          const \u5931\u8D25\u6B21\u6570 = Number(await env.KV\u6570\u636E\u5E93.get(`fail_${\u8BBE\u5907\u6807\u8BC6}`) || 0);\r\n          return \u521B\u5EFAHTML\u54CD\u5E94(\u751F\u6210\u767B\u5F55\u6CE8\u518C\u754C\u9762('\u767B\u5F55', { \u8F93\u9519\u5BC6\u7801: \u5931\u8D25\u6B21\u6570 > 0, \u5269\u4F59\u6B21\u6570: \u6700\u5927\u5931\u8D25\u6B21\u6570 - \u5931\u8D25\u6B21\u6570 }));\r\n\r\n        case '/reset-login-failures':\r\n          await env.KV\u6570\u636E\u5E93.put(`fail_${\u8BBE\u5907\u6807\u8BC6}`, '0');\r\n          await env.KV\u6570\u636E\u5E93.delete(`lock_${\u8BBE\u5907\u6807\u8BC6}`);\r\n          return new Response(null, { status: 200 });\r\n\r\n        case '/check-lock':\r\n          const \u9501\u5B9A\u68C0\u67E5 = await \u68C0\u67E5\u9501\u5B9A(env, \u8BBE\u5907\u6807\u8BC6);\r\n          return \u521B\u5EFAJSON\u54CD\u5E94({\r\n            locked: \u9501\u5B9A\u68C0\u67E5.\u88AB\u9501\u5B9A,\r\n            remainingTime: \u9501\u5B9A\u68C0\u67E5.\u5269\u4F59\u65F6\u95F4\r\n          });\r\n\r\n        case `/${\u914D\u7F6E\u8DEF\u5F84}`:\r\n          const Token = \u8BF7\u6C42.headers.get('Cookie')?.split('=')[1];\r\n          const \u6709\u6548Token = await env.KV\u6570\u636E\u5E93.get('current_token');\r\n          if (!Token || Token !== \u6709\u6548Token) return \u521B\u5EFA\u91CD\u5B9A\u5411\u54CD\u5E94('/login');\r\n          const uuid = await \u83B7\u53D6\u6216\u521D\u59CB\u5316UUID(env);\r\n          return \u521B\u5EFAHTML\u54CD\u5E94(\u751F\u6210\u8BA2\u9605\u9875\u9762(\u914D\u7F6E\u8DEF\u5F84, hostName, uuid));\r\n\r\n        case `/${\u914D\u7F6E\u8DEF\u5F84}/logout`:\r\n          await env.KV\u6570\u636E\u5E93.delete('current_token');\r\n          return \u521B\u5EFA\u91CD\u5B9A\u5411\u54CD\u5E94('/login', { 'Set-Cookie': 'token=; Path=/; Expires=Thu, 01 Jan 1970 00:00:00 GMT; HttpOnly; SameSite=Strict' });\r\n\r\n        case `/${\u914D\u7F6E\u8DEF\u5F84}/` + atob('Y2xhc2g='):\r\n          await \u52A0\u8F7D\u8282\u70B9\u548C\u914D\u7F6E(env, hostName);\r\n          const config = await \u83B7\u53D6\u914D\u7F6E(env, atob('Y2xhc2g='), hostName);\r\n          return new Response(config, { status: 200, headers: { \"Content-Type\": \"text/plain;charset=utf-8\" } });\r\n\r\n        case `/${\u914D\u7F6E\u8DEF\u5F84}/` + atob('djJyYXluZw=='):\r\n          await \u52A0\u8F7D\u8282\u70B9\u548C\u914D\u7F6E(env, hostName);\r\n          const vConfig = await \u83B7\u53D6\u914D\u7F6E(env, atob('djJyYXk='), hostName);\r\n          return new Response(vConfig, { status: 200, headers: { \"Content-Type\": \"text/plain;charset=utf-8\" } });\r\n\r\n        case `/${\u914D\u7F6E\u8DEF\u5F84}/upload`:\r\n          const uploadToken = \u8BF7\u6C42.headers.get('Cookie')?.split('=')[1];\r\n          const \u6709\u6548UploadToken = await env.KV\u6570\u636E\u5E93.get('current_token');\r\n          if (!uploadToken || uploadToken !== \u6709\u6548UploadToken) {\r\n            return \u521B\u5EFAJSON\u54CD\u5E94({ error: '\u672A\u767B\u5F55\u6216Token\u65E0\u6548\uFF0C\u8BF7\u91CD\u65B0\u767B\u5F55' }, 401);\r\n          }\r\n          formData = await \u8BF7\u6C42.formData();\r\n          const ipFiles = formData.getAll('ipFiles');\r\n          if (!ipFiles || ipFiles.length === 0) {\r\n            return \u521B\u5EFAJSON\u54CD\u5E94({ error: '\u672A\u9009\u62E9\u4EFB\u4F55\u6587\u4EF6' }, 400);\r\n          }\r\n          let allIpList = [];\r\n          try {\r\n            for (const ipFile of ipFiles) {\r\n              if (!ipFile || !ipFile.text) throw new Error(`\u6587\u4EF6 ${ipFile.name} \u65E0\u6548`);\r\n              \r\n              // \u9A8C\u8BC1\u6587\u4EF6\u683C\u5F0F\r\n              if (!ipFile.name.toLowerCase().endsWith('.txt')) {\r\n                throw new Error(`\u6587\u4EF6 ${ipFile.name} \u4E0D\u662Ftxt\u683C\u5F0F\uFF0C\u4EC5\u5141\u8BB8\u4E0A\u4F20txt\u683C\u5F0F\u6587\u4EF6`);\r\n              }\r\n              \r\n              // \u9A8C\u8BC1\u6587\u4EF6\u5927\u5C0F\uFF08\u9650\u5236\u4E3A1MB\uFF09\r\n              if (ipFile.size > 1024 * 1024) {\r\n                throw new Error(`\u6587\u4EF6 ${ipFile.name} \u8D85\u8FC7\u5927\u5C0F\u9650\u5236\uFF081MB\uFF09`);\r\n              }\r\n              \r\n              const ipText = await ipFile.text();\r\n              \r\n              // \u9A8C\u8BC1\u6587\u4EF6\u5185\u5BB9\u683C\u5F0F\r\n              const lines = ipText.split('\\n').map(line => line.trim()).filter(Boolean);\r\n              if (lines.length === 0) {\r\n                console.warn(`\u6587\u4EF6 ${ipFile.name} \u5185\u5BB9\u4E3A\u7A7A`);\r\n                continue;\r\n              }\r\n              \r\n              // \u9A8C\u8BC1\u6BCF\u884C\u662F\u5426\u7B26\u5408\u8282\u70B9\u683C\u5F0F\uFF1A[\u5730\u5740]:\u7AEF\u53E3#\u8282\u70B9\u540D\u79F0@tls \u6216 [\u5730\u5740]:\u7AEF\u53E3#\u8282\u70B9\u540D\u79F0@notls\r\n              const validLines = [];\r\n              for (const line of lines) {\r\n                // \u57FA\u672C\u683C\u5F0F\u9A8C\u8BC1\r\n                // \u66F4\u7075\u6D3B\u7684\u8282\u70B9\u683C\u5F0F\u9A8C\u8BC1\uFF0C\u5141\u8BB8\u4EE5\u4E0B\u683C\u5F0F\uFF1A\r\n                // 1. \u5B8C\u6574\u683C\u5F0F\uFF1A[\u5730\u5740]:\u7AEF\u53E3#\u8282\u70B9\u540D\u79F0@tls/notls\r\n                // 2. \u4E0D\u5E26\u7AEF\u53E3\uFF1A[\u5730\u5740]#\u8282\u70B9\u540D\u79F0@tls/notls\r\n                // 3. \u4E0D\u5E26tls/notls\uFF1A[\u5730\u5740]:\u7AEF\u53E3#\u8282\u70B9\u540D\u79F0\r\n                // 4. \u6700\u7B80\u683C\u5F0F\uFF1A[\u5730\u5740]#\u8282\u70B9\u540D\u79F0\r\n                // \u73B0\u5728\u652F\u6301IP\u5730\u5740\uFF08IPv4/IPv6\uFF09\u548C\u57DF\u540D\r\n                const nodePattern = /^(\\[[0-9a-fA-F:]+\\]|[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9](?:\\.[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])*)(?::([0-9]{1,5}))?(?:#(.+?))?(?:@(tls|notls))?$/;\r\n                const match = nodePattern.exec(line);\r\n                if (!match) {\r\n                  console.warn(`\u6587\u4EF6 ${ipFile.name} \u4E2D\u7684\u884C\u683C\u5F0F\u4E0D\u6B63\u786E\uFF0C\u5C06\u88AB\u5FFD\u7565: ${line}`);\r\n                  continue;\r\n                }\r\n                \r\n                const address = match[1];\r\n                const port = match[2];\r\n                const nodeName = match[3] || \u8282\u70B9\u540D\u79F0; // \u4F7F\u7528\u5168\u5C40\u53D8\u91CF\u8282\u70B9\u540D\u79F0\u4F5C\u4E3A\u9ED8\u8BA4\u503C\r\n                const protocol = match[4] || 'tls'; // \u9ED8\u8BA4\u4F7F\u7528tls\r\n                \r\n                // \u5982\u679C\u6709\u7AEF\u53E3\uFF0C\u9A8C\u8BC1\u7AEF\u53E3\u8303\u56F4\r\n                if (port) {\r\n                  const portNum = parseInt(port);\r\n                  if (portNum < 1 || portNum > 65535) {\r\n                    console.warn(`\u6587\u4EF6 ${ipFile.name} \u4E2D\u7684\u7AEF\u53E3\u65E0\u6548\uFF0C\u5C06\u88AB\u5FFD\u7565: ${line}`);\r\n                    continue;\r\n                  }\r\n                }\r\n                \r\n                // \u9A8C\u8BC1IP\u5730\u5740\u683C\u5F0F\uFF08\u5982\u679C\u662FIPv4\uFF09\r\n                const ipv4Pattern = /^[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}/;\r\n                if (ipv4Pattern.test(address)) {\r\n                  const ipParts = address.split('.');\r\n                  let isValidIPv4 = true;\r\n                  for (const part of ipParts) {\r\n                    const num = parseInt(part);\r\n                    if (num < 0 || num > 255) {\r\n                      isValidIPv4 = false;\r\n                      break;\r\n                    }\r\n                  }\r\n                  if (!isValidIPv4) {\r\n                    console.warn(`\u6587\u4EF6 ${ipFile.name} \u4E2D\u7684IPv4\u5730\u5740\u65E0\u6548\uFF0C\u5C06\u88AB\u5FFD\u7565: ${line}`);\r\n                    continue;\r\n                  }\r\n                }\r\n                \r\n                // \u6807\u51C6\u5316\u8282\u70B9\u683C\u5F0F\r\n                const standardPort = port || '443'; // \u9ED8\u8BA4\u7AEF\u53E3443\r\n                const standardizedLine = `${address}:${standardPort}#${nodeName}@${protocol}`;\r\n                validLines.push(standardizedLine);\r\n              }\r\n              \r\n              if (validLines.length === 0) {\r\n                throw new Error(`\u6587\u4EF6 ${ipFile.name} \u4E2D\u6CA1\u6709\u7B26\u5408\u683C\u5F0F\u8981\u6C42\u7684\u8282\u70B9`);\r\n              }\r\n              \r\n              console.log(`\u6587\u4EF6 ${ipFile.name} \u9A8C\u8BC1\u901A\u8FC7\uFF0C\u6709\u6548\u8282\u70B9\u6570: ${validLines.length}`);\r\n              allIpList = allIpList.concat(validLines);\r\n            }\r\n            if (allIpList.length === 0) {\r\n              return \u521B\u5EFAJSON\u54CD\u5E94({ error: '\u6240\u6709\u4E0A\u4F20\u6587\u4EF6\u4E2D\u6CA1\u6709\u7B26\u5408\u683C\u5F0F\u8981\u6C42\u7684\u8282\u70B9' }, 400);\r\n            }\r\n            const uniqueIpList = [...new Set(allIpList)];\r\n\r\n            const \u5F53\u524D\u624B\u52A8\u8282\u70B9 = await env.KV\u6570\u636E\u5E93.get('manual_preferred_ips');\r\n            const \u5F53\u524D\u8282\u70B9\u5217\u8868 = \u5F53\u524D\u624B\u52A8\u8282\u70B9 ? JSON.parse(\u5F53\u524D\u624B\u52A8\u8282\u70B9) : [];\r\n            const \u662F\u91CD\u590D\u4E0A\u4F20 = JSON.stringify(\u5F53\u524D\u8282\u70B9\u5217\u8868.sort()) === JSON.stringify(uniqueIpList.sort());\r\n            if (\u662F\u91CD\u590D\u4E0A\u4F20) {\r\n              return \u521B\u5EFAJSON\u54CD\u5E94({ message: '\u4E0A\u4F20\u5185\u5BB9\u4E0E\u73B0\u6709\u8282\u70B9\u76F8\u540C\uFF0C\u65E0\u9700\u66F4\u65B0' }, 200);\r\n            }\r\n\r\n            await env.KV\u6570\u636E\u5E93.put('manual_preferred_ips', JSON.stringify(uniqueIpList));\r\n            const \u65B0\u7248\u672C = String(Date.now());\r\n            await env.KV\u6570\u636E\u5E93.put('ip_preferred_ips_version', \u65B0\u7248\u672C);\r\n            await env.KV\u6570\u636E\u5E93.put('config_' + atob('Y2xhc2g='), await \u751F\u6210\u732B\u54AA(env, hostName));\r\n            await env.KV\u6570\u636E\u5E93.put('config_' + atob('Y2xhc2g=') + '_version', \u65B0\u7248\u672C);\r\n            await env.KV\u6570\u636E\u5E93.put('config_' + atob('djJyYXk='), await \u751F\u6210\u901A\u7528(env, hostName));\r\n            await env.KV\u6570\u636E\u5E93.put('config_' + atob('djJyYXk=') + '_version', \u65B0\u7248\u672C);\r\n            return \u521B\u5EFAJSON\u54CD\u5E94({ message: '\u4E0A\u4F20\u6210\u529F\uFF0C\u5373\u5C06\u8DF3\u8F6C' }, 200, { 'Location': `/${\u914D\u7F6E\u8DEF\u5F84}` });\r\n          } catch (\u9519\u8BEF) {\r\n            console.error(`\u4E0A\u4F20\u5904\u7406\u5931\u8D25: ${\u9519\u8BEF.message}`);\r\n            return \u521B\u5EFAJSON\u54CD\u5E94({ error: `\u4E0A\u4F20\u5904\u7406\u5931\u8D25: ${\u9519\u8BEF.message}` }, 500);\r\n          }\r\n\r\n        case `/${\u914D\u7F6E\u8DEF\u5F84}/change-uuid`:\r\n          const changeToken = \u8BF7\u6C42.headers.get('Cookie')?.split('=')[1];\r\n          const \u6709\u6548ChangeToken = await env.KV\u6570\u636E\u5E93.get('current_token');\r\n          if (!changeToken || changeToken !== \u6709\u6548ChangeToken) {\r\n            return \u521B\u5EFAJSON\u54CD\u5E94({ error: '\u672A\u767B\u5F55\u6216Token\u65E0\u6548' }, 401);\r\n          }\r\n          const \u65B0UUID = \u751F\u6210UUID();\r\n          await env.KV\u6570\u636E\u5E93.put('current_uuid', \u65B0UUID);\r\n          await env.KV\u6570\u636E\u5E93.put('config_' + atob('Y2xhc2g='), await \u751F\u6210\u732B\u54AA(env, hostName));\r\n          await env.KV\u6570\u636E\u5E93.put('config_' + atob('djJyYXk='), await \u751F\u6210\u901A\u7528(env, hostName));\r\n          const \u65B0\u7248\u672C = String(Date.now());\r\n          await env.KV\u6570\u636E\u5E93.put('config_' + atob('Y2xhc2g=') + '_version', \u65B0\u7248\u672C);\r\n          await env.KV\u6570\u636E\u5E93.put('config_' + atob('djJyYXk=') + '_version', \u65B0\u7248\u672C);\r\n          return \u521B\u5EFAJSON\u54CD\u5E94({ uuid: \u65B0UUID }, 200);\r\n\r\n        case `/${\u914D\u7F6E\u8DEF\u5F84}/add-node-path`:\r\n          const addToken = \u8BF7\u6C42.headers.get('Cookie')?.split('=')[1];\r\n          const \u6709\u6548AddToken = await env.KV\u6570\u636E\u5E93.get('current_token');\r\n          if (!addToken || addToken !== \u6709\u6548AddToken) {\r\n            return \u521B\u5EFAJSON\u54CD\u5E94({ error: '\u672A\u767B\u5F55\u6216Token\u65E0\u6548' }, 401);\r\n          }\r\n          const addData = await \u8BF7\u6C42.json();\r\n          const newPath = addData.path;\r\n          if (!newPath || !newPath.match(/^https?:\\/\\//)) {\r\n            return \u521B\u5EFAJSON\u54CD\u5E94({ error: '\u65E0\u6548\u7684URL\u683C\u5F0F' }, 400);\r\n          }\r\n          let currentPaths = await env.KV\u6570\u636E\u5E93.get('node_file_paths');\r\n          currentPaths = currentPaths ? JSON.parse(currentPaths) : [];\r\n          if (currentPaths.includes(newPath)) {\r\n            return \u521B\u5EFAJSON\u54CD\u5E94({ error: '\u8BE5\u8DEF\u5F84\u5DF2\u5B58\u5728' }, 400);\r\n          }\r\n          currentPaths.push(newPath);\r\n          await env.KV\u6570\u636E\u5E93.put('node_file_paths', JSON.stringify(currentPaths));\r\n          await \u52A0\u8F7D\u8282\u70B9\u548C\u914D\u7F6E(env, hostName);\r\n          return \u521B\u5EFAJSON\u54CD\u5E94({ success: true }, 200);\r\n\r\n        case `/${\u914D\u7F6E\u8DEF\u5F84}/remove-node-path`:\r\n          const removeToken = \u8BF7\u6C42.headers.get('Cookie')?.split('=')[1];\r\n          const \u6709\u6548RemoveToken = await env.KV\u6570\u636E\u5E93.get('current_token');\r\n          if (!removeToken || removeToken !== \u6709\u6548RemoveToken) {\r\n            return \u521B\u5EFAJSON\u54CD\u5E94({ error: '\u672A\u767B\u5F55\u6216Token\u65E0\u6548' }, 401);\r\n          }\r\n          const removeData = await \u8BF7\u6C42.json();\r\n          const index = removeData.index;\r\n          let paths = await env.KV\u6570\u636E\u5E93.get('node_file_paths');\r\n          paths = paths ? JSON.parse(paths) : [];\r\n          if (index < 0 || index >= paths.length) {\r\n            return \u521B\u5EFAJSON\u54CD\u5E94({ error: '\u65E0\u6548\u7684\u7D22\u5F15' }, 400);\r\n          }\r\n          paths.splice(index, 1);\r\n          await env.KV\u6570\u636E\u5E93.put('node_file_paths', JSON.stringify(paths));\r\n          await \u52A0\u8F7D\u8282\u70B9\u548C\u914D\u7F6E(env, hostName);\r\n          return \u521B\u5EFAJSON\u54CD\u5E94({ success: true }, 200);\r\n\r\n        case `/${\u914D\u7F6E\u8DEF\u5F84}/get-node-paths`:\r\n          const getToken = \u8BF7\u6C42.headers.get('Cookie')?.split('=')[1];\r\n          const \u6709\u6548GetToken = await env.KV\u6570\u636E\u5E93.get('current_token');\r\n          if (!getToken || getToken !== \u6709\u6548GetToken) {\r\n            return \u521B\u5EFAJSON\u54CD\u5E94({ error: '\u672A\u767B\u5F55\u6216Token\u65E0\u6548' }, 401);\r\n          }\r\n          let nodePaths = await env.KV\u6570\u636E\u5E93.get('node_file_paths');\r\n          nodePaths = nodePaths ? JSON.parse(nodePaths) : ['https://v2.i-sweet.us.kg/ips.txt', 'https://v2.i-sweet.us.kg/url.txt'];\r\n          return \u521B\u5EFAJSON\u54CD\u5E94({ paths: nodePaths }, 200);\r\n\r\n        case '/set-proxy-state':\r\n          formData = await \u8BF7\u6C42.formData();\r\n          const proxyEnabled = formData.get('proxyEnabled');\r\n          const proxyType = formData.get('proxyType');\r\n          const forceProxy = formData.get('forceProxy');\r\n          await env.KV\u6570\u636E\u5E93.put('proxyEnabled', proxyEnabled);\r\n          await env.KV\u6570\u636E\u5E93.put('proxyType', proxyType);\r\n          await env.KV\u6570\u636E\u5E93.put('forceProxy', forceProxy);\r\n          return new Response(null, { status: 200 });\r\n\r\n        case '/get-proxy-status':\r\n          const \u4EE3\u7406\u542F\u7528 = await env.KV\u6570\u636E\u5E93.get('proxyEnabled') === 'true';\r\n          const \u4EE3\u7406\u7C7B\u578B = await env.KV\u6570\u636E\u5E93.get('proxyType') || 'reverse';\r\n          const \u5F3A\u5236\u4EE3\u7406 = await env.KV\u6570\u636E\u5E93.get('forceProxy') === 'true';\r\n          const \u5F53\u524D\u53CD\u4EE3\u5730\u5740 = env.PROXYIP || \u53CD\u4EE3\u5730\u5740;\r\n          const SOCKS5\u8D26\u53F7 = env.SOCKS5 || '';\r\n          let status = '\u76F4\u8FDE';\r\n          let \u8FDE\u63A5\u5730\u5740 = '';\r\n          \r\n          if (\u4EE3\u7406\u542F\u7528) {\r\n            if (\u5F3A\u5236\u4EE3\u7406) {\r\n              if (\u4EE3\u7406\u7C7B\u578B === 'reverse' && \u5F53\u524D\u53CD\u4EE3\u5730\u5740) {\r\n                status = '\u5F3A\u5236\u53CD\u4EE3';\r\n                \u8FDE\u63A5\u5730\u5740 = \u5F53\u524D\u53CD\u4EE3\u5730\u5740;\r\n              } else if (\u4EE3\u7406\u7C7B\u578B === 'socks5' && SOCKS5\u8D26\u53F7) {\r\n                status = '\u5F3A\u5236SOCKS5';\r\n                \u8FDE\u63A5\u5730\u5740 = SOCKS5\u8D26\u53F7.split('@').pop() || SOCKS5\u8D26\u53F7;\r\n              }\r\n            } else if (\u4EE3\u7406\u7C7B\u578B === 'reverse' && \u5F53\u524D\u53CD\u4EE3\u5730\u5740) {\r\n              status = '\u52A8\u6001\u53CD\u4EE3';\r\n              \u8FDE\u63A5\u5730\u5740 = \u5F53\u524D\u53CD\u4EE3\u5730\u5740;\r\n            } else if (\u4EE3\u7406\u7C7B\u578B === 'socks5' && SOCKS5\u8D26\u53F7) {\r\n              status = '\u52A8\u6001SOCKS5';\r\n              \u8FDE\u63A5\u5730\u5740 = SOCKS5\u8D26\u53F7.split('@').pop() || SOCKS5\u8D26\u53F7;\r\n            }\r\n          }\r\n          return \u521B\u5EFAJSON\u54CD\u5E94({ status, \u8FDE\u63A5\u5730\u5740 });\r\n\r\n        case '/set-b64-state':\r\n          formData = await \u8BF7\u6C42.formData();\r\n          const b64Enabled = formData.get('b64Enabled');\r\n          await env.KV\u6570\u636E\u5E93.put('b64Enabled', b64Enabled);\r\n          return new Response(null, { status: 200 });\r\n\r\n        case '/get-b64-status':\r\n          const b64\u72B6\u6001 = await env.KV\u6570\u636E\u5E93.get('b64Enabled') === 'true';\r\n          return \u521B\u5EFAJSON\u54CD\u5E94({ b64Enabled: b64\u72B6\u6001 });\r\n\r\n        case '/set-wallpaper':\r\n          const wallpaperToken = \u8BF7\u6C42.headers.get('Cookie')?.split('=')[1];\r\n          const \u6709\u6548WallpaperToken = await env.KV\u6570\u636E\u5E93.get('current_token');\r\n          if (!wallpaperToken || wallpaperToken !== \u6709\u6548WallpaperToken) {\r\n            return \u521B\u5EFAJSON\u54CD\u5E94({ error: '\u672A\u767B\u5F55\u6216Token\u65E0\u6548' }, 401);\r\n          }\r\n          formData = await \u8BF7\u6C42.formData();\r\n          const lightWallpaper = formData.get('lightWallpaper') || '';\r\n          const darkWallpaper = formData.get('darkWallpaper') || '';\r\n          await env.KV\u6570\u636E\u5E93.put('custom_light_bg', lightWallpaper);\r\n          await env.KV\u6570\u636E\u5E93.put('custom_dark_bg', darkWallpaper);\r\n          return \u521B\u5EFAJSON\u54CD\u5E94({ success: true });\r\n\r\n        case '/get-wallpaper':\r\n          const getWallpaperToken = \u8BF7\u6C42.headers.get('Cookie')?.split('=')[1];\r\n          const \u6709\u6548GetWallpaperToken = await env.KV\u6570\u636E\u5E93.get('current_token');\r\n          if (!getWallpaperToken || getWallpaperToken !== \u6709\u6548GetWallpaperToken) {\r\n            return \u521B\u5EFAJSON\u54CD\u5E94({ error: '\u672A\u767B\u5F55\u6216Token\u65E0\u6548' }, 401);\r\n          }\r\n          const customLightBg = await env.KV\u6570\u636E\u5E93.get('custom_light_bg') || '';\r\n          const customDarkBg = await env.KV\u6570\u636E\u5E93.get('custom_dark_bg') || '';\r\n          return \u521B\u5EFAJSON\u54CD\u5E94({ lightWallpaper: customLightBg, darkWallpaper: customDarkBg });\r\n\r\n        case '/reset-wallpaper':\r\n          const resetWallpaperToken = \u8BF7\u6C42.headers.get('Cookie')?.split('=')[1];\r\n          const \u6709\u6548ResetWallpaperToken = await env.KV\u6570\u636E\u5E93.get('current_token');\r\n          if (!resetWallpaperToken || resetWallpaperToken !== \u6709\u6548ResetWallpaperToken) {\r\n            return \u521B\u5EFAJSON\u54CD\u5E94({ error: '\u672A\u767B\u5F55\u6216Token\u65E0\u6548' }, 401);\r\n          }\r\n          await env.KV\u6570\u636E\u5E93.delete('custom_light_bg');\r\n          await env.KV\u6570\u636E\u5E93.delete('custom_dark_bg');\r\n          return \u521B\u5EFAJSON\u54CD\u5E94({ success: true });\r\n\r\n        case `/${\u914D\u7F6E\u8DEF\u5F84}/generate-cat-config`:\r\n          const catToken = \u8BF7\u6C42.headers.get('Cookie')?.split('=')[1];\r\n          const \u6709\u6548CatToken = await env.KV\u6570\u636E\u5E93.get('current_token');\r\n          if (!catToken || catToken !== \u6709\u6548CatToken) {\r\n            return \u521B\u5EFAJSON\u54CD\u5E94({ error: '\u672A\u767B\u5F55\u6216Token\u65E0\u6548' }, 401);\r\n          }\r\n          try {\r\n            await \u52A0\u8F7D\u8282\u70B9\u548C\u914D\u7F6E(env, hostName);\r\n            const catConfig = await \u751F\u6210\u732B\u54AA(env, hostName);\r\n            const \u65B0\u7248\u672C = String(Date.now());\r\n            await env.KV\u6570\u636E\u5E93.put('config_' + atob('Y2xhc2g='), catConfig);\r\n            await env.KV\u6570\u636E\u5E93.put('config_' + atob('Y2xhc2g=') + '_version', \u65B0\u7248\u672C);\r\n            return \u521B\u5EFAJSON\u54CD\u5E94({ success: true });\r\n          } catch (\u9519\u8BEF) {\r\n            console.error(`\u751F\u6210\u732B\u54AA\u914D\u7F6E\u5931\u8D25: ${\u9519\u8BEF.message}`);\r\n            return \u521B\u5EFAJSON\u54CD\u5E94({ error: `\u751F\u6210\u732B\u54AA\u914D\u7F6E\u5931\u8D25: ${\u9519\u8BEF.message}` }, 500);\r\n          }\r\n\r\n        case `/${\u914D\u7F6E\u8DEF\u5F84}/generate-universal-config`:\r\n          const universalToken = \u8BF7\u6C42.headers.get('Cookie')?.split('=')[1];\r\n          const \u6709\u6548UniversalToken = await env.KV\u6570\u636E\u5E93.get('current_token');\r\n          if (!universalToken || universalToken !== \u6709\u6548UniversalToken) {\r\n            return \u521B\u5EFAJSON\u54CD\u5E94({ error: '\u672A\u767B\u5F55\u6216Token\u65E0\u6548' }, 401);\r\n          }\r\n          try {\r\n            await \u52A0\u8F7D\u8282\u70B9\u548C\u914D\u7F6E(env, hostName);\r\n            const universalConfig = await \u751F\u6210\u901A\u7528(env, hostName);\r\n            const \u65B0\u7248\u672C = String(Date.now());\r\n            await env.KV\u6570\u636E\u5E93.put('config_' + atob('djJyYXk='), universalConfig);\r\n            await env.KV\u6570\u636E\u5E93.put('config_' + atob('djJyYXk=') + '_version', \u65B0\u7248\u672C);\r\n            return \u521B\u5EFAJSON\u54CD\u5E94({ success: true });\r\n          } catch (\u9519\u8BEF) {\r\n            console.error(`\u751F\u6210\u901A\u7528\u914D\u7F6E\u5931\u8D25: ${\u9519\u8BEF.message}`);\r\n            return \u521B\u5EFAJSON\u54CD\u5E94({ error: `\u751F\u6210\u901A\u7528\u914D\u7F6E\u5931\u8D25: ${\u9519\u8BEF.message}` }, 500);\r\n          }\r\n\r\n        default:\r\n          url.hostname = \u4F2A\u88C5\u57DF\u540D;\r\n          url.protocol = 'https:';\r\n          return fetch(new Request(url, \u8BF7\u6C42));\r\n      }\r\n    } catch (error) {\r\n      console.error(`\u5168\u5C40\u9519\u8BEF: ${error.message}`);\r\n      return \u521B\u5EFAJSON\u54CD\u5E94({ error: `\u670D\u52A1\u5668\u5185\u90E8\u9519\u8BEF: ${error.message}` }, 500);\r\n    }\r\n  }\r\n};\r\n\r\n// ====================== WebSocket\u5904\u7406 ======================\r\nasync function \u5347\u7EA7\u8BF7\u6C42(\u8BF7\u6C42, env) {\r\n  const \u521B\u5EFA\u63A5\u53E3 = new WebSocketPair();\r\n  const [\u5BA2\u6237\u7AEF, \u670D\u52A1\u7AEF] = Object.values(\u521B\u5EFA\u63A5\u53E3);\r\n  \u670D\u52A1\u7AEF.accept();\r\n  const uuid = await \u83B7\u53D6\u6216\u521D\u59CB\u5316UUID(env);\r\n  const \u7ED3\u679C = await \u89E3\u6790\u5934(\u89E3\u5BC6(\u8BF7\u6C42.headers.get('sec-websocket-protocol')), env, uuid);\r\n  if (!\u7ED3\u679C) return new Response('Invalid request', { status: 400 });\r\n  const { TCP\u63A5\u53E3, \u521D\u59CB\u6570\u636E } = \u7ED3\u679C;\r\n  \u5EFA\u7ACB\u7BA1\u9053(\u670D\u52A1\u7AEF, TCP\u63A5\u53E3, \u521D\u59CB\u6570\u636E);\r\n  return new Response(null, { status: 101, webSocket: \u5BA2\u6237\u7AEF });\r\n}\r\n\r\nfunction \u89E3\u5BC6(\u6DF7\u6DC6\u5B57\u7B26) {\r\n  \u6DF7\u6DC6\u5B57\u7B26 = \u6DF7\u6DC6\u5B57\u7B26.replace(/-/g, '+').replace(/_/g, '/');\r\n  return Uint8Array.from(atob(\u6DF7\u6DC6\u5B57\u7B26), c => c.charCodeAt(0)).buffer;\r\n}\r\n\r\nasync function \u89E3\u6790\u5934(\u6570\u636E, env, uuid) {\r\n  const \u6570\u636E\u6570\u7EC4 = new Uint8Array(\u6570\u636E);\r\n  if (\u9A8C\u8BC1\u5BC6\u94A5(\u6570\u636E\u6570\u7EC4.slice(1, 17)) !== uuid) return null;\r\n\r\n  const \u6570\u636E\u5B9A\u4F4D = \u6570\u636E\u6570\u7EC4[17];\r\n  const \u7AEF\u53E3 = new DataView(\u6570\u636E.slice(18 + \u6570\u636E\u5B9A\u4F4D + 1, 20 + \u6570\u636E\u5B9A\u4F4D + 1)).getUint16(0);\r\n  const \u5730\u5740\u7D22\u5F15 = 20 + \u6570\u636E\u5B9A\u4F4D + 1;\r\n  const \u5730\u5740\u7C7B\u578B = \u6570\u636E\u6570\u7EC4[\u5730\u5740\u7D22\u5F15];\r\n  let \u5730\u5740 = '';\r\n  const \u5730\u5740\u4FE1\u606F\u7D22\u5F15 = \u5730\u5740\u7D22\u5F15 + 1;\r\n\r\n  switch (\u5730\u5740\u7C7B\u578B) {\r\n    case 1: \u5730\u5740 = new Uint8Array(\u6570\u636E.slice(\u5730\u5740\u4FE1\u606F\u7D22\u5F15, \u5730\u5740\u4FE1\u606F\u7D22\u5F15 + 4)).join('.'); break;\r\n    case 2:\r\n      const \u5730\u5740\u957F\u5EA6 = \u6570\u636E\u6570\u7EC4[\u5730\u5740\u4FE1\u606F\u7D22\u5F15];\r\n      \u5730\u5740 = new TextDecoder().decode(\u6570\u636E.slice(\u5730\u5740\u4FE1\u606F\u7D22\u5F15 + 1, \u5730\u5740\u4FE1\u606F\u7D22\u5F15 + 1 + \u5730\u5740\u957F\u5EA6));\r\n      break;\r\n    case 3:\r\n      \u5730\u5740 = Array.from({ length: 8 }, (_, i) => new DataView(\u6570\u636E.slice(\u5730\u5740\u4FE1\u606F\u7D22\u5F15, \u5730\u5740\u4FE1\u606F\u7D22\u5F15 + 16)).getUint16(i * 2).toString(16)).join(':');\r\n      break;\r\n    default: return null;\r\n  }\r\n\r\n  const \u521D\u59CB\u6570\u636E = \u6570\u636E.slice(\u5730\u5740\u4FE1\u606F\u7D22\u5F15 + (\u5730\u5740\u7C7B\u578B === 2 ? \u6570\u636E\u6570\u7EC4[\u5730\u5740\u4FE1\u606F\u7D22\u5F15] + 1 : \u5730\u5740\u7C7B\u578B === 1 ? 4 : 16));\r\n  const TCP\u63A5\u53E3 = await \u667A\u80FD\u8FDE\u63A5(\u5730\u5740, \u7AEF\u53E3, \u5730\u5740\u7C7B\u578B, env);\r\n  return { TCP\u63A5\u53E3, \u521D\u59CB\u6570\u636E };\r\n}\r\n\r\nasync function \u667A\u80FD\u8FDE\u63A5(\u5730\u5740, \u7AEF\u53E3, \u5730\u5740\u7C7B\u578B, env) {\r\n  const \u5F53\u524D\u53CD\u4EE3\u5730\u5740 = env.PROXYIP || \u53CD\u4EE3\u5730\u5740;\r\n  const SOCKS5\u8D26\u53F7 = env.SOCKS5 || '';\r\n\r\n  if (!\u5730\u5740 || \u5730\u5740.trim() === '') {\r\n    return await \u5C1D\u8BD5\u76F4\u8FDE(\u5730\u5740, \u7AEF\u53E3);\r\n  }\r\n\r\n  const \u662F\u57DF\u540D = \u5730\u5740\u7C7B\u578B === 2 && !\u5730\u5740.match(/^\\d+\\.\\d+\\.\\d+\\.\\d+$/);\r\n  const \u662FIP = \u5730\u5740\u7C7B\u578B === 1 || (\u5730\u5740\u7C7B\u578B === 2 && \u5730\u5740.match(/^\\d+\\.\\d+\\.\\d+\\.\\d+$/)) || \u5730\u5740\u7C7B\u578B === 3;\r\n\r\n  if (\u662F\u57DF\u540D || \u662FIP) {\r\n    const \u4EE3\u7406\u542F\u7528 = await env.KV\u6570\u636E\u5E93.get('proxyEnabled') === 'true';\r\n    const \u5F3A\u5236\u4EE3\u7406 = await env.KV\u6570\u636E\u5E93.get('forceProxy') === 'true';\r\n    const \u4EE3\u7406\u7C7B\u578B = await env.KV\u6570\u636E\u5E93.get('proxyType') || 'reverse';\r\n\r\n    if (!\u4EE3\u7406\u542F\u7528) {\r\n      return await \u5C1D\u8BD5\u76F4\u8FDE(\u5730\u5740, \u7AEF\u53E3);\r\n    }\r\n\r\n    if (\u5F3A\u5236\u4EE3\u7406) {\r\n        if (\u4EE3\u7406\u7C7B\u578B === 'reverse' && \u5F53\u524D\u53CD\u4EE3\u5730\u5740) {\r\n          try {\r\n            const [\u53CD\u4EE3\u4E3B\u673A, \u53CD\u4EE3\u7AEF\u53E3] = \u5F53\u524D\u53CD\u4EE3\u5730\u5740.split(':');\r\n            const \u8FDE\u63A5 = connect({ hostname: \u53CD\u4EE3\u4E3B\u673A, port: \u53CD\u4EE3\u7AEF\u53E3 || \u7AEF\u53E3 });\r\n            await \u8FDE\u63A5.opened;\r\n            console.log(`\u5F3A\u5236\u901A\u8FC7\u53CD\u4EE3\u8FDE\u63A5: ${\u5F53\u524D\u53CD\u4EE3\u5730\u5740}`);\r\n            return \u8FDE\u63A5;\r\n          } catch (\u9519\u8BEF) {\r\n            console.error(`\u5F3A\u5236\u53CD\u4EE3\u8FDE\u63A5\u5931\u8D25: ${\u9519\u8BEF.message}`);\r\n            throw new Error(`\u5F3A\u5236\u53CD\u4EE3\u5931\u8D25: ${\u9519\u8BEF.message}`);\r\n          }\r\n        } else if (\u4EE3\u7406\u7C7B\u578B === 'socks5' && SOCKS5\u8D26\u53F7) {\r\n        try {\r\n          const SOCKS5\u8FDE\u63A5 = await \u521B\u5EFASOCKS5(\u5730\u5740\u7C7B\u578B, \u5730\u5740, \u7AEF\u53E3);\r\n          console.log(`\u5F3A\u5236\u901A\u8FC7 SOCKS5 \u8FDE\u63A5: ${\u5730\u5740}:${\u7AEF\u53E3}`);\r\n          return SOCKS5\u8FDE\u63A5;\r\n        } catch (\u9519\u8BEF) {\r\n          console.error(`\u5F3A\u5236 SOCKS5 \u8FDE\u63A5\u5931\u8D25: ${\u9519\u8BEF.message}`);\r\n          throw new Error(`\u5F3A\u5236 SOCKS5 \u5931\u8D25: ${\u9519\u8BEF.message}`);\r\n        }\r\n      }\r\n    } else {\r\n      try {\r\n        const \u8FDE\u63A5 = await \u5C1D\u8BD5\u76F4\u8FDE(\u5730\u5740, \u7AEF\u53E3);\r\n        return \u8FDE\u63A5;\r\n      } catch (\u9519\u8BEF) {\r\n        console.log(`\u76F4\u8FDE\u5931\u8D25\uFF0C\u52A8\u6001\u5207\u6362\u5230\u4EE3\u7406: ${\u9519\u8BEF.message}`);\r\n        if (\u4EE3\u7406\u7C7B\u578B === 'reverse' && \u5F53\u524D\u53CD\u4EE3\u5730\u5740) {\r\n          try {\r\n            const [\u53CD\u4EE3\u4E3B\u673A, \u53CD\u4EE3\u7AEF\u53E3] = \u5F53\u524D\u53CD\u4EE3\u5730\u5740.split(':');\r\n            const \u8FDE\u63A5 = connect({ hostname: \u53CD\u4EE3\u4E3B\u673A, port: \u53CD\u4EE3\u7AEF\u53E3 || \u7AEF\u53E3 });\r\n            await \u8FDE\u63A5.opened;\r\n            console.log(`\u52A8\u6001\u901A\u8FC7\u53CD\u4EE3\u8FDE\u63A5: ${\u5F53\u524D\u53CD\u4EE3\u5730\u5740}`);\r\n            return \u8FDE\u63A5;\r\n          } catch (\u9519\u8BEF) {\r\n            console.error(`\u52A8\u6001\u53CD\u4EE3\u8FDE\u63A5\u5931\u8D25: ${\u9519\u8BEF.message}`);\r\n          }\r\n        } else if (\u4EE3\u7406\u7C7B\u578B === 'socks5' && SOCKS5\u8D26\u53F7) {\r\n          try {\r\n            const SOCKS5\u8FDE\u63A5 = await \u521B\u5EFASOCKS5(\u5730\u5740\u7C7B\u578B, \u5730\u5740, \u7AEF\u53E3, SOCKS5\u8D26\u53F7);\r\n            console.log(`\u52A8\u6001\u901A\u8FC7 SOCKS5 \u8FDE\u63A5: ${\u5730\u5740}:${\u7AEF\u53E3}`);\r\n            return SOCKS5\u8FDE\u63A5;\r\n          } catch (\u9519\u8BEF) {\r\n            console.error(`\u52A8\u6001 SOCKS5 \u8FDE\u63A5\u5931\u8D25: ${\u9519\u8BEF.message}`);\r\n          }\r\n        }\r\n        throw new Error(`\u6240\u6709\u8FDE\u63A5\u5C1D\u8BD5\u5931\u8D25: ${\u9519\u8BEF.message}`);\r\n      }\r\n    }\r\n  }\r\n\r\n  return await \u5C1D\u8BD5\u76F4\u8FDE(\u5730\u5740, \u7AEF\u53E3);\r\n}\r\n\r\nasync function \u5C1D\u8BD5\u76F4\u8FDE(\u5730\u5740, \u7AEF\u53E3) {\r\n  try {\r\n    const \u8FDE\u63A5 = connect({ hostname: \u5730\u5740, port: \u7AEF\u53E3 });\r\n    await \u8FDE\u63A5.opened;\r\n    console.log(`\u56DE\u9000\u5230\u76F4\u8FDE: ${\u5730\u5740}:${\u7AEF\u53E3}`);\r\n    return \u8FDE\u63A5;\r\n  } catch (\u9519\u8BEF) {\r\n    console.error(`\u76F4\u8FDE\u5931\u8D25: ${\u9519\u8BEF.message}`);\r\n    throw new Error(`\u65E0\u6CD5\u8FDE\u63A5: ${\u9519\u8BEF.message}`);\r\n  }\r\n}\r\n\r\nfunction \u9A8C\u8BC1\u5BC6\u94A5(arr) {\r\n  return Array.from(arr.slice(0, 16), b => b.toString(16).padStart(2, '0')).join('').match(/(.{8})(.{4})(.{4})(.{4})(.{12})/).slice(1).join('-').toLowerCase();\r\n}\r\n\r\nasync function \u5EFA\u7ACB\u7BA1\u9053(\u670D\u52A1\u7AEF, TCP\u63A5\u53E3, \u521D\u59CB\u6570\u636E) {\r\n  await \u670D\u52A1\u7AEF.send(new Uint8Array([0, 0]).buffer);\r\n  const \u6570\u636E\u6D41 = new ReadableStream({\r\n    async start(\u63A7\u5236\u5668) {\r\n      if (\u521D\u59CB\u6570\u636E) \u63A7\u5236\u5668.enqueue(\u521D\u59CB\u6570\u636E);\r\n      \u670D\u52A1\u7AEF.addEventListener('message', event => \u63A7\u5236\u5668.enqueue(event.data));\r\n      \u670D\u52A1\u7AEF.addEventListener('close', () => { \u63A7\u5236\u5668.close(); TCP\u63A5\u53E3.close(); setTimeout(() => \u670D\u52A1\u7AEF.close(1000), 2); });\r\n      \u670D\u52A1\u7AEF.addEventListener('error', () => { \u63A7\u5236\u5668.close(); TCP\u63A5\u53E3.close(); setTimeout(() => \u670D\u52A1\u7AEF.close(1001), 2); });\r\n    }\r\n  });\r\n  \u6570\u636E\u6D41.pipeTo(new WritableStream({\r\n    async write(\u6570\u636E) {\r\n      const \u5199\u5165\u5668 = TCP\u63A5\u53E3.writable.getWriter();\r\n      await \u5199\u5165\u5668.write(\u6570\u636E);\r\n      \u5199\u5165\u5668.releaseLock();\r\n    }\r\n  }));\r\n  TCP\u63A5\u53E3.readable.pipeTo(new WritableStream({\r\n    async write(\u6570\u636E) {\r\n      await \u670D\u52A1\u7AEF.send(\u6570\u636E);\r\n    }\r\n  }));\r\n}\r\n\r\nasync function \u521B\u5EFASOCKS5(\u5730\u5740\u7C7B\u578B, \u5730\u5740, \u7AEF\u53E3, socks5\u8D26\u53F7 = null) {\r\n  const \u4F7F\u7528\u7684SOCKS5\u8D26\u53F7 = socks5\u8D26\u53F7 || SOCKS5\u8D26\u53F7;\r\n  const { username, password, hostname, port } = await \u89E3\u6790SOCKS5\u8D26\u53F7(\u4F7F\u7528\u7684SOCKS5\u8D26\u53F7);\r\n  const SOCKS5\u63A5\u53E3 = connect({ hostname, port });\r\n  try {\r\n    await SOCKS5\u63A5\u53E3.opened;\r\n  } catch {\r\n    return new Response('SOCKS5\u672A\u8FDE\u901A', { status: 400 });\r\n  }\r\n  const writer = SOCKS5\u63A5\u53E3.writable.getWriter();\r\n  const reader = SOCKS5\u63A5\u53E3.readable.getReader();\r\n  const encoder = new TextEncoder();\r\n  await writer.write(new Uint8Array([5, 2, 0, 2]));\r\n  let res = (await reader.read()).value;\r\n  if (res[1] === 0x02) {\r\n    if (!username || !password) return \u5173\u95ED\u63A5\u53E3();\r\n    await writer.write(new Uint8Array([1, username.length, ...encoder.encode(username), password.length, ...encoder.encode(password)]));\r\n    res = (await reader.read()).value;\r\n    if (res[0] !== 0x01 || res[1] !== 0x00) return \u5173\u95ED\u63A5\u53E3();\r\n  }\r\n  let \u8F6C\u6362\u5730\u5740;\r\n  switch (\u5730\u5740\u7C7B\u578B) {\r\n    case 1: \u8F6C\u6362\u5730\u5740 = new Uint8Array([1, ...\u5730\u5740.split('.').map(Number)]); break;\r\n    case 2: \u8F6C\u6362\u5730\u5740 = new Uint8Array([3, \u5730\u5740.length, ...encoder.encode(\u5730\u5740)]); break;\r\n    case 3: \u8F6C\u6362\u5730\u5740 = new Uint8Array([4, ...\u5730\u5740.split(':').flatMap(x => [parseInt(x.slice(0, 2), 16), parseInt(x.slice(2), 16)])]); break;\r\n    default: return \u5173\u95ED\u63A5\u53E3();\r\n  }\r\n  await writer.write(new Uint8Array([5, 1, 0, ...\u8F6C\u6362\u5730\u5740, \u7AEF\u53E3 >> 8, \u7AEF\u53E3 & 0xff]));\r\n  res = (await reader.read()).value;\r\n  if (res[0] !== 0x05 || res[1] !== 0x00) return \u5173\u95ED\u63A5\u53E3();\r\n  writer.releaseLock();\r\n  reader.releaseLock();\r\n  return SOCKS5\u63A5\u53E3;\r\n\r\n  function \u5173\u95ED\u63A5\u53E3() {\r\n    writer.releaseLock();\r\n    reader.releaseLock();\r\n    SOCKS5\u63A5\u53E3.close();\r\n    return new Response('SOCKS5\u63E1\u624B\u5931\u8D25', { status: 400 });\r\n  }\r\n}\r\n\r\nasync function \u89E3\u6790SOCKS5\u8D26\u53F7(SOCKS5) {\r\n  const [latter, former] = SOCKS5.split(\"@\").reverse();\r\n  let username, password, hostname, port;\r\n  if (former) [username, password] = former.split(\":\");\r\n  const latters = latter.split(\":\");\r\n  port = Number(latters.pop());\r\n  hostname = latters.join(\":\");\r\n  return { username, password, hostname, port };\r\n}\r\n\r\nfunction \u751F\u6210\u8BA2\u9605\u9875\u9762(\u914D\u7F6E\u8DEF\u5F84, hostName, uuid) {\r\n  return `\r\n<!DOCTYPE html>\r\n<html>\r\n<head>\r\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n  <style>\r\n    body {\r\n      font-family: 'Comic Sans MS', 'Arial', sans-serif;\r\n      color: #ff6f91;\r\n      margin: 0;\r\n      padding: 20px;\r\n      min-height: 100vh;\r\n      display: flex;\r\n      justify-content: center;\r\n      align-items: flex-start;\r\n      transition: background 0.5s ease;\r\n    }\r\n    @media (prefers-color-scheme: light) {\r\n      body { background: linear-gradient(135deg, #ffe6f0, #fff0f5); }\r\n      .card { background: rgba(255, 245, 247, 0.9); box-shadow: 0 8px 20px rgba(255, 182, 193, 0.3); }\r\n      .card::before { border: 2px dashed #ffb6c1; }\r\n      .card:hover { box-shadow: 0 10px 25px rgba(255, 182, 193, 0.5); }\r\n      .link-box, .proxy-status, .uuid-box, .force-proxy-note { background: rgba(255, 240, 245, 0.9); border: 2px dashed #ffb6c1; }\r\n      .file-item, .url-item { background: rgba(255, 245, 247, 0.9); }\r\n      .upload-btn, .add-url-btn { background: linear-gradient(to right, #ffb6c1, #ff69b4); }\r\n      .upload-label { background: linear-gradient(to right, #ffb6c1, #ff69b4); }\r\n    }\r\n    @media (prefers-color-scheme: dark) {\r\n      body { background: linear-gradient(135deg, #1e1e2f, #2a2a3b); }\r\n      .card { background: rgba(30, 30, 30, 0.9); color: #ffd1dc; box-shadow: 0 8px 20px rgba(255, 133, 162, 0.2); }\r\n      .card::before { border: 2px dashed #ff85a2; }\r\n      .card:hover { box-shadow: 0 10px 25px rgba(255, 133, 162, 0.4); }\r\n      .link-box, .proxy-status, .uuid-box, .force-proxy-note { background: rgba(40, 40, 40, 0.9); border: 2px dashed #ff85a2; color: #ffd1dc; }\r\n      .link-box a, .uuid-box span { color: #ff85a2; }\r\n      .link-box a:hover { color: #ff1493; }\r\n.file-item, .url-item { background: rgba(50, 50, 50, 0.9); color: #ffd1dc; }\r\n.file-requirements { background: rgba(40, 40, 40, 0.9); border: 2px dashed #ff85a2; color: #ffd1dc; }\r\n.file-requirements h3 { color: #ff85a2; }\r\n.file-requirements .example { background: rgba(0, 0, 0, 0.3); }\r\n.upload-btn, .add-url-btn { background: linear-gradient(to right, #ff85a2, #ff1493); }\r\n.upload-label { background: linear-gradient(to right, #ff85a2, #ff1493); }\r\n.force-proxy-note { background: rgba(40, 40, 40, 0.9) !important; border: 2px dashed #ff85a2 !important; color: #ffd1dc !important; }\r\n    }\r\n    .background-media {\r\n      position: fixed;\r\n      top: 0;\r\n      left: 0;\r\n      width: 100%;\r\n      height: 100%;\r\n      object-fit: cover;\r\n      z-index: -1;\r\n      transition: opacity 0.5s ease;\r\n    }\r\n    .container {\r\n      max-width: 900px;\r\n      width: 100%;\r\n      display: flex;\r\n      flex-direction: column;\r\n      align-items: center;\r\n      gap: 25px;\r\n      position: relative;\r\n      z-index: 1;\r\n      padding-bottom: 20px;\r\n    }\r\n    .card {\r\n      border-radius: 25px;\r\n      padding: 25px;\r\n      width: 100%;\r\n      max-width: 500px;\r\n      text-align: center;\r\n      transition: transform 0.3s ease, box-shadow 0.3s ease;\r\n      position: relative;\r\n      overflow: visible;\r\n    }\r\n    .card::before {\r\n      content: '';\r\n      position: absolute;\r\n      top: 10px;\r\n      left: 10px;\r\n      right: 10px;\r\n      bottom: 10px;\r\n      border-radius: 20px;\r\n      z-index: -1;\r\n    }\r\n    .card:hover { transform: scale(1.03); }\r\n    .card::after {\r\n      content: '\uD83C\uDF80';\r\n      position: absolute;\r\n      top: -20px;\r\n      right: -20px;\r\n      font-size: 60px;\r\n      color: #ff69b4;\r\n      transform: rotate(20deg);\r\n      z-index: 1;\r\n      text-shadow: 2px 2px 4px rgba(255, 105, 180, 0.3);\r\n      pointer-events: none;\r\n    }\r\n    @media (prefers-color-scheme: dark) {\r\n      .card::after { color: #ff85a2; text-shadow: 2px 2px 4px rgba(255, 133, 162, 0.3); }\r\n    }\r\n    .card-title {\r\n      font-size: 1.6em;\r\n      color: #ff69b4;\r\n      margin-bottom: 15px;\r\n      text-shadow: 1px 1px 3px rgba(255, 105, 180, 0.2);\r\n    }\r\n    .switch-container { display: flex; flex-direction: column; align-items: center; gap: 15px; }\r\n    .toggle-row { display: flex; align-items: center; gap: 15px; }\r\n    .toggle-switch { position: relative; display: inline-block; width: 60px; height: 34px; }\r\n    .toggle-switch input { opacity: 0; width: 0; height: 0; }\r\n    .slider {\r\n      position: absolute;\r\n      cursor: pointer;\r\n      top: 0;\r\n      left: 0;\r\n      right: 0;\r\n      bottom: 0;\r\n      background-color: #ccc;\r\n      transition: .4s;\r\n      border-radius: 34px;\r\n    }\r\n    .slider:before {\r\n      position: absolute;\r\n      content: \"\";\r\n      height: 26px;\r\n      width: 26px;\r\n      left: 4px;\r\n      bottom: 4px;\r\n      background-color: white;\r\n      transition: .4s;\r\n      border-radius: 50%;\r\n    }\r\n    input:checked + .slider { background-color: #ff69b4; }\r\n    input:checked + .slider:before { transform: translateX(26px); }\r\n    .proxy-capsule { display: flex; border-radius: 20px; overflow: hidden; background: #ffe6f0; box-shadow: 0 4px 10px rgba(255, 182, 193, 0.2); }\r\n    .proxy-option { width: 80px; padding: 10px 0; text-align: center; cursor: pointer; color: #ff6f91; transition: all 0.3s ease; position: relative; font-size: 1em; }\r\n    .proxy-option.active { background: linear-gradient(to right, #ffb6c1, #ff69b4); color: white; box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.1); }\r\n    .proxy-option:not(.active):hover { background: #ffd1dc; }\r\n    .proxy-option[data-type=\"socks5\"].active { background: linear-gradient(to right, #ffd1dc, #ff85a2); }\r\n    .proxy-option::before { content: ''; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%; background: rgba(255, 255, 255, 0.2); transform: rotate(30deg); transition: all 0.5s ease; pointer-events: none; }\r\n    .proxy-option:hover::before { top: 100%; left: 100%; }\r\n    .proxy-status, .uuid-box, .force-proxy-note { margin-top: 20px; padding: 12px 15px; border-radius: 15px; font-size: 0.9em; word-break: break-all; transition: background 0.3s ease, color 0.3s ease; width: 100%; box-sizing: border-box; line-height: 1.4; }\r\n    .proxy-status.success { background: rgba(212, 237, 218, 0.9); color: #155724; }\r\n    .proxy-status.direct { background: rgba(233, 236, 239, 0.9); color: #495057; }\r\n    .force-proxy-note { font-size: 0.9em; color: #ff85a2; border: 2px dashed #ffb6c1; }\r\n.file-requirements { margin-top: 20px; padding: 15px; border-radius: 15px; background: rgba(255, 240, 245, 0.9); border: 2px dashed #ffb6c1; font-size: 0.9em; color: #d63384; transition: background 0.3s ease, color 0.3s ease; }\r\n.file-requirements h3 { margin-top: 0; margin-bottom: 10px; color: #ff1493; font-size: 1.1em; }\r\n.file-requirements ul { margin-bottom: 0; padding-left: 20px; }\r\n.file-requirements li { margin-bottom: 5px; }\r\n.file-requirements .example { font-family: monospace; background: rgba(255, 255, 255, 0.7); padding: 2px 5px; border-radius: 3px; }\r\n    .link-box { border-radius: 15px; padding: 15px; margin: 10px 0; font-size: 0.95em; word-break: break-all; }\r\n    .link-box a { color: #ff69b4; text-decoration: none; transition: color 0.3s ease; }\r\n    .link-box a:hover { color: #ff1493; }\r\n    .button-group { display: flex; justify-content: center; gap: 10px; flex-wrap: wrap; margin-top: 15px; }\r\n    .cute-button {\r\n      padding: 12px 25px;\r\n      border-radius: 20px;\r\n      border: none;\r\n      font-size: 1em;\r\n      font-family: 'Comic Sans MS', 'Arial', sans-serif;\r\n      color: white;\r\n      cursor: pointer;\r\n      transition: transform 0.2s ease, box-shadow 0.2s ease;\r\n      box-sizing: border-box;\r\n      display: inline-block;\r\n    }\r\n    .cute-button:hover { transform: scale(1.05); box-shadow: 0 5px 15px rgba(255, 105, 180, 0.4); }\r\n    .cute-button:active { transform: scale(0.95); }\r\n    .config1-btn { background: linear-gradient(to right, #ffb6c1, #ff69b4); }\r\n    .config2-btn { background: linear-gradient(to right, #ffd1dc, #ff85a2); }\r\n    .logout-btn { background: linear-gradient(to right, #ff9999, #ff6666); }\r\n    .uuid-btn { background: linear-gradient(to right, #ffdead, #ff85a2); }\r\n    .upload-btn, .add-url-btn {\r\n      background: linear-gradient(to right, #ffdead, #ff85a2);\r\n      margin-top: 5px;\r\n    }\r\n    .upload-title { font-size: 1.4em; color: #ff85a2; margin-bottom: 15px; }\r\n    .upload-label { padding: 10px 20px; background: linear-gradient(to right, #ffb6c1, #ff69b4); color: white; border-radius: 20px; cursor: pointer; display: inline-block; transition: all 0.3s ease; margin-top: 10px; }\r\n    .upload-label:hover { transform: scale(1.05); box-shadow: 0 5px 15px rgba(255, 105, 180, 0.4); }\r\n    .file-list, .url-list { margin: 15px 0; max-height: 120px; overflow-y: auto; text-align: left; }\r\n    .file-item, .url-item { display: flex; justify-content: space-between; align-items: center; padding: 8px 12px; border-radius: 10px; margin: 5px 0; font-size: 0.9em; }\r\n    .file-item button, .url-item button { background: #ff9999; border: none; border-radius: 15px; padding: 5px 10px; color: white; cursor: pointer; transition: background 0.3s ease; }\r\n    .file-item button:hover, .url-item button:hover { background: #ff6666; }\r\n    .progress-container { display: none; margin-top: 15px; }\r\n    .progress-bar { width: 100%; height: 15px; background: #ffe6f0; border-radius: 10px; overflow: hidden; border: 1px solid #ffb6c1; }\r\n    .progress-fill { height: 100%; background: linear-gradient(to right, #ff69b4, #ff1493); width: 0; transition: width 0.3s ease; }\r\n    .progress-text { text-align: center; font-size: 0.85em; color: #ff6f91; margin-top: 5px; }\r\n    .url-input {\r\n      width: 100%;\r\n      padding: 10px;\r\n      border-radius: 15px;\r\n      border: 2px solid #ffb6c1;\r\n      font-size: 1em;\r\n      box-sizing: border-box;\r\n      margin-bottom: 10px;\r\n    }\r\n    @media (max-width: 600px) {\r\n      .card { padding: 15px; max-width: 90%; }\r\n      .card-title { font-size: 1.3em; }\r\n      .switch-container { gap: 10px; }\r\n      .toggle-row { gap: 10px; }\r\n      .proxy-option { width: 70px; padding: 8px 0; font-size: 0.9em; }\r\n      .proxy-status, .uuid-box, .force-proxy-note { font-size: 0.85em; padding: 10px 12px; }\r\n      .link-box { font-size: 0.9em; padding: 12px; }\r\n      .cute-button, .upload-label { padding: 10px 20px; font-size: 0.9em; }\r\n      .card::after { font-size: 50px; top: -15px; right: -15px; }\r\n      .url-input { font-size: 0.9em; }\r\n      .button-group { gap: 8px; }\r\n    }\r\n  </style>\r\n</head>\r\n<body>\r\n  <img id=\"backgroundImage\" class=\"background-media\">\r\n  <div class=\"container\">\r\n    <div class=\"card\">\r\n      <h1 class=\"card-title\">\uD83C\uDF38\u6A31\u82B1\u9762\u677F\uD83C\uDF38</h1>\r\n      <p style=\"font-size: 1em;\">\u652F\u6301 <span style=\"color: #ff69b4;\">${atob('Y2xhc2g=')}</span> \u548C <span style=\"color: #ff85a2;\">${atob('djJyYXluZw==')}</span> \u54E6~</p>\r\n    </div>\r\n    <div class=\"card\">\r\n      <h2 class=\"card-title\">\uD83D\uDD11 \u5F53\u524D UUID</h2>\r\n      <div class=\"uuid-box\">\r\n        <span id=\"currentUUID\">${uuid}</span>\r\n      </div>\r\n      <div class=\"button-group\">\r\n        <button class=\"cute-button uuid-btn\" onclick=\"\u66F4\u6362UUID()\">\u66F4\u6362 UUID</button>\r\n      </div>\r\n    </div>\r\n    <div class=\"card\">\r\n      <h2 class=\"card-title\">\uD83C\uDF1F \u4EE3\u7406\u8BBE\u7F6E</h2>\r\n      <div class=\"switch-container\">\r\n        <div class=\"toggle-row\">\r\n          <label>\u4EE3\u7406\u5F00\u5173</label>\r\n          <label class=\"toggle-switch\">\r\n            <input type=\"checkbox\" id=\"proxyToggle\" onchange=\"toggleProxy()\">\r\n            <span class=\"slider\"></span>\r\n          </label>\r\n        </div>\r\n        <div class=\"toggle-row\" id=\"forceProxyRow\" style=\"display: none;\">\r\n          <label>\u5F3A\u5236\u4EE3\u7406</label>\r\n          <label class=\"toggle-switch\">\r\n            <input type=\"checkbox\" id=\"forceProxyToggle\" onchange=\"toggleForceProxy()\">\r\n            <span class=\"slider\"></span>\r\n          </label>\r\n        </div>\r\n        <div class=\"proxy-capsule\" id=\"proxyCapsule\">\r\n          <div class=\"proxy-option active\" data-type=\"reverse\" onclick=\"switchProxyType('reverse')\">\u53CD\u4EE3</div>\r\n          <div class=\"proxy-option\" data-type=\"socks5\" onclick=\"switchProxyType('socks5')\">SOCKS5</div>\r\n        </div>\r\n      </div>\r\n      <div class=\"proxy-status\" id=\"proxyStatus\">\u76F4\u8FDE</div>\r\n      <div class=\"force-proxy-note\" id=\"forceProxyNote\" style=\"display: none;\">\r\n        <span id=\"forceProxyText\"></span>\r\n      </div>\r\n    </div>\r\n    <div class=\"card\">\r\n      <h2 class=\"card-title\">\uD83D\uDD10 \u52A0\u5BC6\u8BBE\u7F6E</h2>\r\n      <div class=\"switch-container\">\r\n        <div class=\"toggle-row\">\r\n          <label>Base64\u52A0\u5BC6</label>\r\n          <label class=\"toggle-switch\">\r\n            <input type=\"checkbox\" id=\"b64Toggle\" onchange=\"toggleB64()\">\r\n            <span class=\"slider\"></span>\r\n          </label>\r\n        </div>\r\n      </div>\r\n      <div class=\"proxy-status\" id=\"b64Status\">\u5F53\u524D\u8BA2\u9605\u94FE\u63A5\u672A\u52A0\u5BC6</div>\r\n    </div>\r\n    <div class=\"card\">\r\n      <h2 class=\"card-title\">\uD83C\uDFA8 \u58C1\u7EB8\u8BBE\u7F6E</h2>\r\n      <div class=\"wallpaper-settings\">\r\n        <div class=\"wallpaper-input-group\">\r\n          <label>\u767D\u5929\u58C1\u7EB8\u5730\u5740\uFF1A</label>\r\n          <input type=\"text\" id=\"lightWallpaperInput\" class=\"wallpaper-input\" placeholder=\"\u7559\u7A7A\u4F7F\u7528\u9ED8\u8BA4\u58C1\u7EB8\">\r\n        </div>\r\n        <div class=\"wallpaper-input-group\">\r\n          <label>\u6697\u9ED1\u58C1\u7EB8\u5730\u5740\uFF1A</label>\r\n          <input type=\"text\" id=\"darkWallpaperInput\" class=\"wallpaper-input\" placeholder=\"\u7559\u7A7A\u4F7F\u7528\u9ED8\u8BA4\u58C1\u7EB8\">\r\n        </div>\r\n        <div class=\"wallpaper-preview\" id=\"wallpaperPreview\">\r\n          <div class=\"preview-item\">\r\n            <span>\u767D\u5929\u9884\u89C8\uFF1A</span>\r\n            <img id=\"lightPreview\" class=\"preview-img\">\r\n          </div>\r\n          <div class=\"preview-item\">\r\n            <span>\u6697\u9ED1\u9884\u89C8\uFF1A</span>\r\n            <img id=\"darkPreview\" class=\"preview-img\">\r\n          </div>\r\n        </div>\r\n        <div class=\"button-group\">\r\n          <button class=\"cute-button\" onclick=\"\u4FDD\u5B58\u58C1\u7EB8\u8BBE\u7F6E()\">\u4FDD\u5B58\u8BBE\u7F6E</button>\r\n          <button class=\"cute-button\" onclick=\"\u6062\u590D\u9ED8\u8BA4\u58C1\u7EB8()\">\u6062\u590D\u9ED8\u8BA4</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"card\">\r\n      <h2 class=\"upload-title\">\uD83C\uDF0F \u4F18\u9009IP\u7F51\u7EDC\u8DEF\u5F84</h2>\r\n      <div>\r\n        <input type=\"text\" id=\"nodeUrlInput\" class=\"url-input\" placeholder=\"\u8F93\u5165\u8282\u70B9\u6587\u4EF6 URL\uFF08\u5982 https://example.com/ips.txt\uFF09\">\r\n        <button class=\"cute-button add-url-btn\" onclick=\"\u6DFB\u52A0\u8282\u70B9\u8DEF\u5F84()\">\u6DFB\u52A0\u8DEF\u5F84</button>\r\n        <div class=\"url-list\" id=\"urlList\"></div>\r\n      </div>\r\n    </div>\r\n    <div class=\"card\">\r\n      <h2 class=\"card-title\">\uD83D\uDC3E \u732B\u54AA\u8BA2\u9605</h2>\r\n      <div class=\"link-box\">\r\n        <p>\u8BA2\u9605\u94FE\u63A5\uFF1A<br><a href=\"https://${hostName}/${\u914D\u7F6E\u8DEF\u5F84}/${atob('Y2xhc2g=')}\">https://${hostName}/${\u914D\u7F6E\u8DEF\u5F84}/${atob('Y2xhc2g=')}</a></p>\r\n      </div>\r\n      <div class=\"button-group\">\r\n        <button class=\"cute-button config2-btn\" onclick=\"\u5BFC\u5165Config('${\u914D\u7F6E\u8DEF\u5F84}', '${hostName}', '${atob('Y2xhc2g=')}')\">\u4E00\u952E\u5BFC\u5165</button>\r\n      </div>\r\n    </div>\r\n    <div class=\"card\">\r\n      <h2 class=\"card-title\">\uD83D\uDC30 \u901A\u7528\u8BA2\u9605</h2>\r\n      <div class=\"link-box\">\r\n        <p>\u8BA2\u9605\u94FE\u63A5\uFF1A<br><a href=\"https://${hostName}/${\u914D\u7F6E\u8DEF\u5F84}/${atob('djJyYXluZw==')}\">https://${hostName}/${\u914D\u7F6E\u8DEF\u5F84}/${atob('djJyYXluZw==')}</a></p>\r\n      </div>\r\n      <div class=\"button-group\">\r\n        <button class=\"cute-button config2-btn\" onclick=\"\u5BFC\u5165Config('${\u914D\u7F6E\u8DEF\u5F84}', '${hostName}', '${atob('djJyYXluZw==')}')\">\u4E00\u952E\u5BFC\u5165</button>\r\n      </div>\r\n    </div>\r\n    <div class=\"card\">\r\n      <h2 class=\"upload-title\">\uD83C\uDF1F \u4E0A\u4F20\u4F60\u7684\u4F18\u9009\u8282\u70B9</h2>\r\n      <div class=\"upload-notice force-proxy-note\">\r\n        <p>\u8BF7\u4E0A\u4F20\u5305\u542B\u4F18\u9009IP\u6216\u57DF\u540D\u7684.txt\u6587\u4EF6\uFF0C\u6BCF\u884C\u4E00\u4E2A\u8282\u70B9</p>\r\n      </div>\r\n      <form id=\"uploadForm\" action=\"/${\u914D\u7F6E\u8DEF\u5F84}/upload\" method=\"POST\" enctype=\"multipart/form-data\">\r\n        <label for=\"ipFiles\" class=\"upload-label\">\u9009\u62E9\u6587\u4EF6</label>\r\n        <input type=\"file\" id=\"ipFiles\" name=\"ipFiles\" accept=\".txt\" multiple required onchange=\"\u663E\u793A\u6587\u4EF6()\" style=\"display: none;\">\r\n        <div class=\"file-list\" id=\"fileList\"></div>\r\n        <button type=\"submit\" class=\"cute-button upload-btn\" onclick=\"\u5F00\u59CB\u4E0A\u4F20(event)\">\u4E0A\u4F20</button>\r\n        <div class=\"progress-container\" id=\"progressContainer\">\r\n          <div class=\"progress-bar\">\r\n            <div class=\"progress-fill\" id=\"progressFill\"></div>\r\n          </div>\r\n          <div class=\"progress-text\" id=\"progressText\">0%</div>\r\n        </div>\r\n      </form>\r\n    </div>\r\n    <div class=\"card\">\r\n      <div class=\"button-group\">\r\n        <a href=\"/${\u914D\u7F6E\u8DEF\u5F84}/logout\" class=\"cute-button logout-btn\">\u9000\u51FA\u767B\u5F55</a>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <script>\r\n    const lightBg = '${\u9ED8\u8BA4\u767D\u5929\u80CC\u666F\u56FE}';\r\n    const darkBg = '${\u9ED8\u8BA4\u6697\u9ED1\u80CC\u666F\u56FE}';\r\n    const bgImage = document.getElementById('backgroundImage');\r\n\r\n    async function \u83B7\u53D6\u58C1\u7EB8\u5730\u5740() {\r\n      try {\r\n        const response = await fetch('/get-wallpaper');\r\n        if (response.ok) {\r\n          const data = await response.json();\r\n          return {\r\n            light: data.lightWallpaper || '${\u9ED8\u8BA4\u767D\u5929\u80CC\u666F\u56FE}',\r\n      dark: data.darkWallpaper || '${\u9ED8\u8BA4\u6697\u9ED1\u80CC\u666F\u56FE}'\r\n          };\r\n        }\r\n      } catch (error) {\r\n        console.error('\u83B7\u53D6\u58C1\u7EB8\u5730\u5740\u5931\u8D25:', error);\r\n      }\r\n      return {\r\n        light: '${\u9ED8\u8BA4\u767D\u5929\u80CC\u666F\u56FE}',\r\n      dark: '${\u9ED8\u8BA4\u6697\u9ED1\u80CC\u666F\u56FE}'\r\n      };\r\n    }\r\n\r\n    async function updateBackground() {\r\n      const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches;\r\n      const wallpaper = await \u83B7\u53D6\u58C1\u7EB8\u5730\u5740();\r\n      bgImage.src = isDarkMode ? wallpaper.dark : wallpaper.light;\r\n      bgImage.onerror = () => { bgImage.style.display = 'none'; };\r\n    }\r\n    updateBackground();\r\n    window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', updateBackground);\r\n\r\n    let proxyEnabled = localStorage.getItem('proxyEnabled') === 'true';\r\n    let proxyType = localStorage.getItem('proxyType') || 'reverse';\r\n    let forceProxy = localStorage.getItem('forceProxy') === 'true';\r\n    let b64Enabled = localStorage.getItem('b64Enabled') === 'true';\r\n    document.getElementById('proxyToggle').checked = proxyEnabled;\r\n    document.getElementById('forceProxyToggle').checked = forceProxy;\r\n    document.getElementById('b64Toggle').checked = b64Enabled;\r\n    updateProxyUI();\r\n    updateProxyStatus();\r\n    updateB64Status();\r\n\r\n    function \u52A0\u8F7D\u8282\u70B9\u8DEF\u5F84() {\r\n      fetch('/${\u914D\u7F6E\u8DEF\u5F84}/get-node-paths')\r\n        .then(response => response.json())\r\n        .then(data => {\r\n          const urlList = document.getElementById('urlList');\r\n          urlList.innerHTML = '';\r\n          data.paths.forEach((path, index) => {\r\n            const div = document.createElement('div');\r\n            div.className = 'url-item';\r\n            div.innerHTML = '<span>' + path + '</span><button onclick=\"\u79FB\u9664\u8282\u70B9\u8DEF\u5F84(' + index + ')\">\u79FB\u9664</button>';\r\n            urlList.appendChild(div);\r\n          });\r\n        })\r\n        .catch(() => alert('\u52A0\u8F7D\u8282\u70B9\u8DEF\u5F84\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5~'));\r\n    }\r\n\r\n    function \u6DFB\u52A0\u8282\u70B9\u8DEF\u5F84() {\r\n      const urlInput = document.getElementById('nodeUrlInput');\r\n      const url = urlInput.value.trim();\r\n      if (!url) {\r\n        alert('\u5582\uFF01\u5927\u81ED\u5B9D\uFF0C\u8BF7\u8F93\u5165\u6709\u6548\u7684 URL \u54E6~');\r\n        return;\r\n      }\r\n      if (!url.startsWith('http://') && !url.startsWith('https://')) {\r\n        alert('URL \u5FC5\u987B\u4EE5 http:// \u6216 https:// \u5F00\u5934\u54E6~');\r\n        return;\r\n      }\r\n      fetch('/${\u914D\u7F6E\u8DEF\u5F84}/add-node-path', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ path: url })\r\n      })\r\n        .then(response => response.json())\r\n        .then(data => {\r\n          if (data.success) {\r\n            urlInput.value = '';\r\n            \u52A0\u8F7D\u8282\u70B9\u8DEF\u5F84();\r\n            alert('\u8DEF\u5F84\u6DFB\u52A0\u6210\u529F\uFF01');\r\n          } else {\r\n            alert(data.error || '\u6DFB\u52A0\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5~');\r\n          }\r\n        })\r\n        .catch(() => alert('\u6DFB\u52A0\u5931\u8D25\uFF0C\u7F51\u7EDC\u51FA\u9519\u5566~'));\r\n    }\r\n\r\n    function \u79FB\u9664\u8282\u70B9\u8DEF\u5F84(index) {\r\n      fetch('/${\u914D\u7F6E\u8DEF\u5F84}/remove-node-path', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ index })\r\n      })\r\n        .then(response => response.json())\r\n        .then(data => {\r\n          if (data.success) {\r\n            \u52A0\u8F7D\u8282\u70B9\u8DEF\u5F84();\r\n            alert('\u8DEF\u5F84\u79FB\u9664\u6210\u529F\uFF01');\r\n          } else {\r\n            alert(data.error || '\u79FB\u9664\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5~');\r\n          }\r\n        })\r\n        .catch(() => alert('\u79FB\u9664\u5931\u8D25\uFF0C\u7F51\u7EDC\u51FA\u9519\u5566~'));\r\n    }\r\n\r\n    \u52A0\u8F7D\u8282\u70B9\u8DEF\u5F84();\r\n\r\n    function toggleProxy() {\r\n      proxyEnabled = document.getElementById('proxyToggle').checked;\r\n      localStorage.setItem('proxyEnabled', proxyEnabled);\r\n      updateProxyUI();\r\n      saveProxyState();\r\n      updateProxyStatus();\r\n    }\r\n\r\n    function toggleForceProxy() {\r\n      forceProxy = document.getElementById('forceProxyToggle').checked;\r\n      localStorage.setItem('forceProxy', forceProxy);\r\n      saveProxyState();\r\n      updateProxyStatus();\r\n      updateProxyUI();\r\n    }\r\n\r\n    function switchProxyType(type) {\r\n      proxyType = type;\r\n      localStorage.setItem('proxyType', proxyType);\r\n      updateProxyUI();\r\n      saveProxyState();\r\n      updateProxyStatus();\r\n    }\r\n\r\n    function updateProxyUI() {\r\n      const forceProxyRow = document.getElementById('forceProxyRow');\r\n      const forceProxyNote = document.getElementById('forceProxyNote');\r\n      const forceProxyText = document.getElementById('forceProxyText');\r\n      const proxyCapsule = document.getElementById('proxyCapsule');\r\n      const options = document.querySelectorAll('.proxy-option');\r\n\r\n      forceProxyRow.style.display = proxyEnabled ? 'flex' : 'none';\r\n      forceProxyNote.style.display = proxyEnabled ? 'block' : 'none';\r\n      proxyCapsule.style.display = proxyEnabled ? 'flex' : 'none';\r\n      options.forEach(opt => {\r\n        opt.classList.toggle('active', opt.dataset.type === proxyType);\r\n      });\r\n\r\n      if (proxyEnabled) {\r\n        forceProxyText.textContent = forceProxy \r\n          ? '\u5F3A\u5236\u4EE3\u7406\u5F00\u542F\u540E\uFF0C\u60A8\u7684\u51FA\u53E3\u5C06\u56FA\u5B9A\u4E3A\u4EE3\u7406\u670D\u52A1\u5668\u7684\u5F52\u5C5E\u5730\u3002'\r\n          : '\u52A8\u6001\u4EE3\u7406\u5C06\u4F18\u5148\u5C1D\u8BD5\u76F4\u8FDE\uFF0C\u5931\u8D25\u65F6\u81EA\u52A8\u5207\u6362\u81F3\u4EE3\u7406\u3002';\r\n      }\r\n    }\r\n\r\n    function updateProxyStatus() {\r\n      const statusElement = document.getElementById('proxyStatus');\r\n      if (!proxyEnabled) {\r\n        statusElement.textContent = '\u76F4\u8FDE';\r\n        statusElement.className = 'proxy-status direct';\r\n      } else {\r\n        fetch('/get-proxy-status')\r\n          .then(response => response.json())\r\n          .then(data => {\r\n            let statusText = data.status;\r\n            if (data.\u8FDE\u63A5\u5730\u5740) {\r\n              statusText += '\uFF1A' + data.\u8FDE\u63A5\u5730\u5740;\r\n            }\r\n            statusElement.textContent = statusText;\r\n            statusElement.className = 'proxy-status ' + (data.status === '\u76F4\u8FDE' ? 'direct' : 'success');\r\n          })\r\n          .catch(() => {\r\n            statusElement.textContent = '\u76F4\u8FDE';\r\n            statusElement.className = 'proxy-status direct';\r\n          });\r\n      }\r\n    }\r\n\r\n    function toggleB64() {\r\n      b64Enabled = document.getElementById('b64Toggle').checked;\r\n      localStorage.setItem('b64Enabled', b64Enabled);\r\n      saveB64State();\r\n      updateB64Status();\r\n      // \u7ACB\u5373\u751F\u6210\u732B\u54AA\u548C\u901A\u7528\u914D\u7F6E\u5E76\u5B58\u5165KV\u6570\u636E\u5E93\r\n      generateAndSaveConfigs();\r\n    }\r\n\r\n    function generateAndSaveConfigs() {\r\n      // \u751F\u6210\u732B\u54AA\u914D\u7F6E\r\n      fetch('/${\u914D\u7F6E\u8DEF\u5F84}/generate-cat-config', { method: 'POST' })\r\n        .then(response => response.json())\r\n        .then(data => {\r\n          if (data.success) {\r\n            console.log('\u732B\u54AA\u914D\u7F6E\u5DF2\u751F\u6210\u5E76\u4FDD\u5B58');\r\n          } else {\r\n            console.error('\u732B\u54AA\u914D\u7F6E\u751F\u6210\u5931\u8D25:', data.error);\r\n          }\r\n        })\r\n        .catch(error => console.error('\u732B\u54AA\u914D\u7F6E\u751F\u6210\u8BF7\u6C42\u5931\u8D25:', error));\r\n      \r\n      // \u751F\u6210\u901A\u7528\u914D\u7F6E\r\n      fetch('/${\u914D\u7F6E\u8DEF\u5F84}/generate-universal-config', { method: 'POST' })\r\n        .then(response => response.json())\r\n        .then(data => {\r\n          if (data.success) {\r\n            console.log('\u901A\u7528\u914D\u7F6E\u5DF2\u751F\u6210\u5E76\u4FDD\u5B58');\r\n          } else {\r\n            console.error('\u901A\u7528\u914D\u7F6E\u751F\u6210\u5931\u8D25:', data.error);\r\n          }\r\n        })\r\n        .catch(error => console.error('\u901A\u7528\u914D\u7F6E\u751F\u6210\u8BF7\u6C42\u5931\u8D25:', error));\r\n    }\r\n\r\n    function saveB64State() {\r\n      const formData = new FormData();\r\n      formData.append('b64Enabled', b64Enabled);\r\n      fetch('/set-b64-state', { method: 'POST', body: formData })\r\n        .then(() => updateB64Status());\r\n    }\r\n\r\n    function updateB64Status() {\r\n      const statusElement = document.getElementById('b64Status');\r\n      if (b64Enabled) {\r\n        statusElement.textContent = '\u5F53\u524D\u8BA2\u9605\u94FE\u63A5\u5DF2Base64\u52A0\u5BC6';\r\n        statusElement.className = 'proxy-status success';\r\n      } else {\r\n        statusElement.textContent = '\u5F53\u524D\u8BA2\u9605\u94FE\u63A5\u672A\u52A0\u5BC6';\r\n        statusElement.className = 'proxy-status direct';\r\n      }\r\n    }\r\n\r\n    function saveProxyState() {\r\n      const formData = new FormData();\r\n      formData.append('proxyEnabled', proxyEnabled);\r\n      formData.append('proxyType', proxyType);\r\n      formData.append('forceProxy', forceProxy);\r\n      fetch('/set-proxy-state', { method: 'POST', body: formData })\r\n        .then(() => updateProxyStatus());\r\n    }\r\n\r\n    function \u5BFC\u5165Config(\u914D\u7F6E\u8DEF\u5F84, hostName, type) {\r\n      window.location.href = type + '://install-config?url=https://' + hostName + '/${\u914D\u7F6E\u8DEF\u5F84}/' + type;\r\n    }\r\n\r\n    function \u66F4\u6362UUID() {\r\n      fetch('/${\u914D\u7F6E\u8DEF\u5F84}/change-uuid', { method: 'POST' })\r\n        .then(response => response.json())\r\n        .then(data => {\r\n          if (data.uuid) {\r\n            document.getElementById('currentUUID').textContent = data.uuid;\r\n            alert('UUID \u5DF2\u66F4\u6362\u6210\u529F\uFF01\u8BF7\u91CD\u65B0\u83B7\u53D6\u8BA2\u9605\u94FE\u63A5~');\r\n          } else {\r\n            alert('\u66F4\u6362 UUID \u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5~');\r\n          }\r\n        })\r\n        .catch(() => alert('\u66F4\u6362 UUID \u5931\u8D25\uFF0C\u7F51\u7EDC\u51FA\u9519\u5566~'));\r\n    }\r\n\r\n    function \u663E\u793A\u6587\u4EF6() {\r\n      const fileInput = document.getElementById('ipFiles');\r\n      const fileList = document.getElementById('fileList');\r\n      fileList.innerHTML = '';\r\n      Array.from(fileInput.files).forEach((file, index) => {\r\n        const div = document.createElement('div');\r\n        div.className = 'file-item';\r\n        div.innerHTML = '<span>' + file.name + ' (' + (file.size / 1024).toFixed(2) + ' KB)</span><button onclick=\"\u79FB\u9664\u6587\u4EF6(' + index + ')\">\u79FB\u9664</button>';\r\n        fileList.appendChild(div);\r\n      });\r\n    }\r\n\r\n    function \u79FB\u9664\u6587\u4EF6(index) {\r\n      const fileInput = document.getElementById('ipFiles');\r\n      const dt = new DataTransfer();\r\n      Array.from(fileInput.files).forEach((file, i) => { if (i !== index) dt.items.add(file); });\r\n      fileInput.files = dt.files;\r\n      \u663E\u793A\u6587\u4EF6();\r\n    }\r\n\r\n    function \u5F00\u59CB\u4E0A\u4F20(event) {\r\n      event.preventDefault();\r\n      const form = document.getElementById('uploadForm');\r\n      const progressContainer = document.getElementById('progressContainer');\r\n      const progressFill = document.getElementById('progressFill');\r\n      const progressText = document.getElementById('progressText');\r\n      const formData = new FormData(form);\r\n\r\n      if (!formData.getAll('ipFiles').length) {\r\n        alert('\u5582\uFF01\u5927\u81ED\u5B9D\uFF0C\u8BF7\u5148\u9009\u62E9\u6587\u4EF6\u54E6~');\r\n        return;\r\n      }\r\n\r\n      progressContainer.style.display = 'block';\r\n      progressFill.style.width = '0%';\r\n      progressText.textContent = '0%';\r\n\r\n      const xhr = new XMLHttpRequest();\r\n      xhr.open('POST', form.action, true);\r\n\r\n      xhr.upload.onprogress = function(e) {\r\n        if (e.lengthComputable) {\r\n          const percentComplete = (e.loaded / e.total) * 100;\r\n          progressFill.style.width = percentComplete + '%';\r\n          progressText.textContent = Math.round(percentComplete) + '%';\r\n        }\r\n      };\r\n\r\n      xhr.onload = function() {\r\n        progressFill.style.width = '100%';\r\n        progressText.textContent = '100%';\r\n        try {\r\n          const response = JSON.parse(xhr.responseText);\r\n          if (xhr.status === 200) {\r\n            if (response.message) {\r\n              setTimeout(() => {\r\n                alert(response.message);\r\n                window.location.href = response.Location || '/${\u914D\u7F6E\u8DEF\u5F84}';\r\n              }, 500);\r\n            } else {\r\n              throw new Error('\u54CD\u5E94\u683C\u5F0F\u9519\u8BEF');\r\n            }\r\n          } else {\r\n            throw new Error(response.error || '\u672A\u77E5\u9519\u8BEF');\r\n          }\r\n        } catch (err) {\r\n          progressContainer.style.display = 'none';\r\n          alert('\u4E0A\u4F20\u5931\u8D25\u5566\uFF0C\u72B6\u6001\u7801: ' + xhr.status + '\uFF0C\u539F\u56E0: ' + err.message);\r\n        }\r\n      };\r\n\r\n      xhr.onerror = function() {\r\n        progressContainer.style.display = 'none';\r\n        alert('\u7F51\u7EDC\u574F\u6389\u4E86\uFF0C\u5582\uFF01\u5927\u81ED\u5B9D\u8BF7\u68C0\u67E5\u4E00\u4E0B\u54E6~');\r\n      };\r\n\r\n      xhr.send(formData);\r\n    }\r\n\r\n    let lastUA = navigator.userAgent;\r\n    function checkUAChange() {\r\n      const currentUA = navigator.userAgent;\r\n      if (currentUA !== lastUA) {\r\n        console.log('UA \u5DF2\u5207\u6362\uFF0C\u4ECE', lastUA, '\u5230', currentUA);\r\n        lastUA = currentUA;\r\n        adjustLayoutForUA();\r\n      }\r\n    }\r\n    setInterval(checkUAChange, 500);\r\n\r\n    function adjustLayoutForUA() {\r\n      const isMobile = /Mobile|Android|iPhone/i.test(navigator.userAgent);\r\n      const container = document.querySelector('.container');\r\n      const cards = document.querySelectorAll('.card');\r\n      \r\n      if (isMobile) {\r\n        container.style.padding = '10px';\r\n        cards.forEach(card => {\r\n          card.style.maxWidth = '100%';\r\n          card.style.padding = '15px';\r\n        });\r\n      } else {\r\n        container.style.padding = '20px';\r\n        cards.forEach(card => {\r\n          card.style.maxWidth = '500px';\r\n          card.style.padding = '25px';\r\n        });\r\n      }\r\n    }\r\n    adjustLayoutForUA();\r\n\r\n    document.addEventListener('DOMContentLoaded', () => {\r\n      updateProxyUI();\r\n      \u521D\u59CB\u5316\u58C1\u7EB8\u8BBE\u7F6E();\r\n    });\r\n\r\n    // \u4FDD\u5B58\u58C1\u7EB8\u8BBE\u7F6E\u51FD\u6570\r\n    async function \u4FDD\u5B58\u58C1\u7EB8\u8BBE\u7F6E() {\r\n      const lightWallpaper = document.getElementById('lightWallpaperInput').value.trim();\r\n      const darkWallpaper = document.getElementById('darkWallpaperInput').value.trim();\r\n      \r\n      try {\r\n        const formData = new FormData();\r\n        formData.append('lightWallpaper', lightWallpaper);\r\n        formData.append('darkWallpaper', darkWallpaper);\r\n        \r\n        const response = await fetch('/set-wallpaper', {\r\n          method: 'POST',\r\n          body: formData\r\n        });\r\n        \r\n        if (response.ok) {\r\n          alert('\u58C1\u7EB8\u8BBE\u7F6E\u4FDD\u5B58\u6210\u529F\uFF01');\r\n          // \u66F4\u65B0\u9884\u89C8\r\n          updateWallpaperPreview();\r\n          // \u66F4\u65B0\u80CC\u666F\u56FE\r\n          updateBackground();\r\n        } else {\r\n          const errorData = await response.json();\r\n          alert('\u4FDD\u5B58\u5931\u8D25\uFF1A' + (errorData.error || '\u672A\u77E5\u9519\u8BEF'));\r\n        }\r\n      } catch (error) {\r\n        alert('\u4FDD\u5B58\u5931\u8D25\uFF1A\u7F51\u7EDC\u9519\u8BEF');\r\n        console.error('\u4FDD\u5B58\u58C1\u7EB8\u8BBE\u7F6E\u5931\u8D25:', error);\r\n      }\r\n    }\r\n\r\n    // \u6062\u590D\u9ED8\u8BA4\u58C1\u7EB8\u51FD\u6570\r\n    async function \u6062\u590D\u9ED8\u8BA4\u58C1\u7EB8() {\r\n      if (!confirm('\u786E\u5B9A\u8981\u6062\u590D\u9ED8\u8BA4\u58C1\u7EB8\u5417\uFF1F')) {\r\n        return;\r\n      }\r\n      \r\n      try {\r\n        const response = await fetch('/reset-wallpaper', {\r\n          method: 'POST'\r\n        });\r\n        \r\n        if (response.ok) {\r\n          alert('\u9ED8\u8BA4\u58C1\u7EB8\u5DF2\u6062\u590D\uFF01');\r\n          // \u6E05\u7A7A\u8F93\u5165\u6846\r\n          document.getElementById('lightWallpaperInput').value = '';\r\n          document.getElementById('darkWallpaperInput').value = '';\r\n          // \u66F4\u65B0\u9884\u89C8\r\n          updateWallpaperPreview();\r\n          // \u66F4\u65B0\u80CC\u666F\u56FE\r\n          updateBackground();\r\n        } else {\r\n          const errorData = await response.json();\r\n          alert('\u6062\u590D\u5931\u8D25\uFF1A' + (errorData.error || '\u672A\u77E5\u9519\u8BEF'));\r\n        }\r\n      } catch (error) {\r\n        alert('\u6062\u590D\u5931\u8D25\uFF1A\u7F51\u7EDC\u9519\u8BEF');\r\n        console.error('\u6062\u590D\u9ED8\u8BA4\u58C1\u7EB8\u5931\u8D25:', error);\r\n      }\r\n    }\r\n\r\n    // \u66F4\u65B0\u58C1\u7EB8\u9884\u89C8\u51FD\u6570\r\n    function updateWallpaperPreview() {\r\n      const lightWallpaper = document.getElementById('lightWallpaperInput').value.trim();\r\n      const darkWallpaper = document.getElementById('darkWallpaperInput').value.trim();\r\n      const lightPreview = document.getElementById('lightPreview');\r\n      const darkPreview = document.getElementById('darkPreview');\r\n      \r\n      // \u8BBE\u7F6E\u767D\u5929\u9884\u89C8\r\n      if (lightWallpaper) {\r\n        lightPreview.src = lightWallpaper;\r\n        lightPreview.style.display = 'block';\r\n        lightPreview.onerror = function() {\r\n          this.style.display = 'none';\r\n          alert('\u767D\u5929\u58C1\u7EB8\u5730\u5740\u65E0\u6548\u6216\u65E0\u6CD5\u52A0\u8F7D');\r\n        };\r\n      } else {\r\n        lightPreview.style.display = 'none';\r\n      }\r\n      \r\n      // \u8BBE\u7F6E\u6697\u9ED1\u9884\u89C8\r\n      if (darkWallpaper) {\r\n        darkPreview.src = darkWallpaper;\r\n        darkPreview.style.display = 'block';\r\n        darkPreview.onerror = function() {\r\n          this.style.display = 'none';\r\n          alert('\u6697\u9ED1\u58C1\u7EB8\u5730\u5740\u65E0\u6548\u6216\u65E0\u6CD5\u52A0\u8F7D');\r\n        };\r\n      } else {\r\n        darkPreview.style.display = 'none';\r\n      }\r\n    }\r\n\r\n    // \u9875\u9762\u52A0\u8F7D\u65F6\u521D\u59CB\u5316\u58C1\u7EB8\u8BBE\u7F6E\r\n    async function \u521D\u59CB\u5316\u58C1\u7EB8\u8BBE\u7F6E() {\r\n      try {\r\n        const response = await fetch('/get-wallpaper');\r\n        if (response.ok) {\r\n          const data = await response.json();\r\n          document.getElementById('lightWallpaperInput').value = data.lightWallpaper || '';\r\n          document.getElementById('darkWallpaperInput').value = data.darkWallpaper || '';\r\n          updateWallpaperPreview();\r\n        }\r\n      } catch (error) {\r\n        console.error('\u521D\u59CB\u5316\u58C1\u7EB8\u8BBE\u7F6E\u5931\u8D25:', error);\r\n      }\r\n    }\r\n\r\n    // \u8F93\u5165\u6846\u53D8\u5316\u65F6\u5B9E\u65F6\u66F4\u65B0\u9884\u89C8\r\n    document.getElementById('lightWallpaperInput').addEventListener('input', updateWallpaperPreview);\r\n    document.getElementById('darkWallpaperInput').addEventListener('input', updateWallpaperPreview);\r\n  </script>\r\n</body>\r\n</html>\r\n  `;\r\n}\r\n\r\nfunction \u751F\u6210KV\u672A\u7ED1\u5B9A\u63D0\u793A\u9875\u9762() {\r\n  return `\r\n<!DOCTYPE html>\r\n<html>\r\n<head>\r\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n  <style>\r\n    body {\r\n      font-family: 'Comic Sans MS', 'Arial', sans-serif;\r\n      color: #ff6f91;\r\n      margin: 0;\r\n      height: 100vh;\r\n      display: flex;\r\n      justify-content: center;\r\n      align-items: center;\r\n      position: relative;\r\n      overflow: hidden;\r\n      transition: background 0.5s ease;\r\n    }\r\n    @media (prefers-color-scheme: light) {\r\n      body { background: linear-gradient(135deg, #ffe6f0, #fff0f5); }\r\n      .content { background: rgba(255, 245, 247, 0.9); box-shadow: 0 8px 20px rgba(255, 182, 193, 0.3); }\r\n    }\r\n    @media (prefers-color-scheme: dark) {\r\n      body { background: linear-gradient(135deg, #1e1e2f, #2a2a3b); }\r\n      .content { background: rgba(30, 30, 30, 0.9); color: #ffd1dc; box-shadow: 0 8px 20px rgba(255, 133, 162, 0.2); }\r\n    }\r\n    .background-media {\r\n      position: fixed;\r\n      top: 0;\r\n      left: 0;\r\n      width: 100%;\r\n      height: 100%;\r\n      object-fit: cover;\r\n      z-index: -1;\r\n      transition: opacity 0.5s ease;\r\n    }\r\n    .content {\r\n      padding: 30px;\r\n      border-radius: 25px;\r\n      max-width: 500px;\r\n      width: 90%;\r\n      text-align: center;\r\n      position: relative;\r\n      z-index: 1;\r\n    }\r\n    h1 {\r\n      font-size: 1.8em;\r\n      color: #ff69b4;\r\n      text-shadow: 1px 1px 3px rgba(255, 105, 180, 0.2);\r\n      margin-bottom: 20px;\r\n    }\r\n    p {\r\n      font-size: 1.1em;\r\n      line-height: 1.6;\r\n      color: #ff85a2;\r\n    }\r\n    .highlight {\r\n      color: #ff1493;\r\n      font-weight: bold;\r\n    }\r\n    .instruction {\r\n      margin-top: 20px;\r\n      font-size: 1em;\r\n      color: #ff69b4;\r\n    }\r\n    @media (max-width: 600px) {\r\n      .content { padding: 20px; }\r\n      h1 { font-size: 1.5em; }\r\n      p { font-size: 0.95em; }\r\n    }\r\n  </style>\r\n</head>\r\n<body>\r\n  <img id=\"backgroundImage\" class=\"background-media\">\r\n  <div class=\"content\">\r\n    <h1>\uD83D\uDC94 \u54CE\u5440\uFF0CKV\u6CA1\u7ED1\u5B9A\u54E6</h1>\r\n    <p>\u5582\uFF01\u5927\u81ED\u5B9D\uFF0C\u4F60\u7684 <span class=\"highlight\">Cloudflare KV \u5B58\u50A8\u7A7A\u95F4</span> \u8FD8\u6CA1\u7ED1\u5B9A\u5462~<br>\u5FEB\u53BB <span class=\"highlight\">Cloudflare Workers</span> \u8BBE\u7F6E\u91CC\u7ED1\u4E00\u4E2A KV \u547D\u540D\u7A7A\u95F4\uFF08\u53D8\u91CF\u540D\uFF1A<span class=\"highlight\">KV\u6570\u636E\u5E93</span>\uFF09\uFF0C\u7136\u540E\u91CD\u65B0\u90E8\u7F72\u4E00\u4E0B\u5427\uFF01</p>\r\n    <div class=\"instruction\">\u7ED1\u5B9A\u597D\u540E <span class=\"highlight\">\u5237\u65B0\u754C\u9762</span> \u5C31\u53EF\u4EE5\u8FDB\u5165\u6CE8\u518C\u5566~</div>\r\n  </div>\r\n  <script>\r\n    const lightBg = '${\u9ED8\u8BA4\u767D\u5929\u80CC\u666F\u56FE}';\r\n    const darkBg = '${\u9ED8\u8BA4\u6697\u9ED1\u80CC\u666F\u56FE}';\r\n    const bgImage = document.getElementById('backgroundImage');\r\n\r\n    function updateBackground() {\r\n      const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches;\r\n      bgImage.src = isDarkMode ? darkBg : lightBg;\r\n      bgImage.onerror = () => { bgImage.style.display = 'none'; };\r\n    }\r\n    updateBackground();\r\n    window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', updateBackground);\r\n\r\n    let lastUA = navigator.userAgent;\r\n    function checkUAChange() {\r\n      const currentUA = navigator.userAgent;\r\n      if (currentUA !== lastUA) {\r\n        console.log('UA \u5DF2\u5207\u6362\uFF0C\u4ECE', lastUA, '\u5230', currentUA);\r\n        lastUA = currentUA;\r\n      }\r\n    }\r\n    setInterval(checkUAChange, 500);\r\n  </script>\r\n</body>\r\n</html>\r\n  `;\r\n}\r\n\r\nasync function \u751F\u6210\u732B\u54AA(env, hostName) {\r\n  const uuid = await \u83B7\u53D6\u6216\u521D\u59CB\u5316UUID(env);\r\n  const \u8282\u70B9\u5217\u8868 = \u4F18\u9009\u8282\u70B9.length ? \u4F18\u9009\u8282\u70B9 : [`${hostName}:443`];\r\n  const b64Enabled = await env.KV\u6570\u636E\u5E93.get('b64Enabled') === 'true';\r\n  const \u56FD\u5BB6\u5206\u7EC4 = {};\r\n\r\n  \u8282\u70B9\u5217\u8868.forEach((\u8282\u70B9, \u7D22\u5F15) => {\r\n    const [\u4E3B\u5185\u5BB9, tls] = \u8282\u70B9.split(\"@\");\r\n    const [\u5730\u5740\u7AEF\u53E3, \u8282\u70B9\u540D\u5B57 = \u8282\u70B9\u540D\u79F0] = \u4E3B\u5185\u5BB9.split(\"#\");\r\n    const [, \u5730\u5740, \u7AEF\u53E3 = \"443\"] = \u5730\u5740\u7AEF\u53E3.match(/^\\[(.*?)\\](?::(\\d+))?$/) || \u5730\u5740\u7AEF\u53E3.match(/^(.*?)(?::(\\d+))?$/);\r\n    const \u4FEE\u6B63\u5730\u5740 = \u5730\u5740.includes(\":\") ? \u5730\u5740.replace(/^\\[|\\]$/g, '') : \u5730\u5740;\r\n    const TLS\u5F00\u5173 = tls === 'notls' ? 'false' : 'true';\r\n    const \u56FD\u5BB6 = \u8282\u70B9\u540D\u5B57.split('-')[0] || '\u9ED8\u8BA4';\r\n    const \u5730\u5740\u7C7B\u578B = \u4FEE\u6B63\u5730\u5740.includes(\":\") ? \"IPv6\" : \"IPv4\";\r\n\r\n    \u56FD\u5BB6\u5206\u7EC4[\u56FD\u5BB6] = \u56FD\u5BB6\u5206\u7EC4[\u56FD\u5BB6] || { IPv4: [], IPv6: [] };\r\n    \u56FD\u5BB6\u5206\u7EC4[\u56FD\u5BB6][\u5730\u5740\u7C7B\u578B].push({\r\n      name: `${\u8282\u70B9\u540D\u5B57}-${\u56FD\u5BB6\u5206\u7EC4[\u56FD\u5BB6][\u5730\u5740\u7C7B\u578B].length + 1}`,\r\n      config: `- name: \"${\u8282\u70B9\u540D\u5B57}-${\u56FD\u5BB6\u5206\u7EC4[\u56FD\u5BB6][\u5730\u5740\u7C7B\u578B].length + 1}\"\r\n  type: ${atob('dmxlc3M=')}\r\n  server: ${\u4FEE\u6B63\u5730\u5740}\r\n  port: ${\u7AEF\u53E3}\r\n  uuid: ${uuid}\r\n  udp: false\r\n  tls: ${TLS\u5F00\u5173}\r\n  sni: ${hostName}\r\n  network: ws\r\n  ws-opts:\r\n    path: \"/?ed=2560\"\r\n    headers:\r\n      Host: ${hostName}`\r\n    });\r\n  });\r\n\r\n  const \u56FD\u5BB6\u5217\u8868 = Object.keys(\u56FD\u5BB6\u5206\u7EC4).sort();\r\n  const \u8282\u70B9\u914D\u7F6E = \u56FD\u5BB6\u5217\u8868.flatMap(\u56FD\u5BB6 => [...\u56FD\u5BB6\u5206\u7EC4[\u56FD\u5BB6].IPv4, ...\u56FD\u5BB6\u5206\u7EC4[\u56FD\u5BB6].IPv6].map(n => n.config)).join(\"\\n\");\r\n  const \u56FD\u5BB6\u5206\u7EC4\u914D\u7F6E = \u56FD\u5BB6\u5217\u8868.map(\u56FD\u5BB6 => `\r\n  - name: \"${\u56FD\u5BB6}\"\r\n    type: url-test\r\n    url: \"http://www.gstatic.com/generate_204\"\r\n    interval: 120\r\n    tolerance: 50\r\n    proxies:\r\n${[...\u56FD\u5BB6\u5206\u7EC4[\u56FD\u5BB6].IPv4, ...\u56FD\u5BB6\u5206\u7EC4[\u56FD\u5BB6].IPv6].map(n => `      - \"${n.name}\"`).join(\"\\n\")}\r\n`).join(\"\");\r\n\r\n  const \u914D\u7F6E\u6587\u672C = `# Generated at: ${new Date().toISOString()}\r\nmixed-port: 7890\r\nallow-lan: true\r\nmode: Rule\r\nlog-level: info\r\nexternal-controller: :9090\r\ndns:\r\n  enable: true\r\n  listen: 0.0.0.0:53\r\n  default-nameserver:\r\n    - 8.8.8.8\r\n    - 1.1.1.1\r\n  enhanced-mode: fake-ip\r\n  nameserver:\r\n    - tls://8.8.8.8\r\n    - tls://1.1.1.1\r\n  fallback:\r\n    - tls://9.9.9.9\r\n    - tls://1.0.0.1\r\n  fallback-filter:\r\n    geoip: true\r\n    ipcidr:\r\n      - 240.0.0.0/4\r\n\r\nproxies:\r\n${\u8282\u70B9\u914D\u7F6E}\r\n\r\nproxy-groups:\r\n  - name: \"\uD83D\uDE80\u8282\u70B9\u9009\u62E9\"\r\n    type: select\r\n    proxies:\r\n      - \"\uD83E\uDD2A\u81EA\u52A8\u9009\u62E9\"\r\n      - \"\uD83E\uDD70\u8D1F\u8F7D\u5747\u8861\"\r\n${\u56FD\u5BB6\u5217\u8868.map(\u56FD\u5BB6 => `      - \"${\u56FD\u5BB6}\"`).join(\"\\n\")}\r\n\r\n  - name: \"\uD83E\uDD2A\u81EA\u52A8\u9009\u62E9\"\r\n    type: url-test\r\n    url: \"http://www.gstatic.com/generate_204\"\r\n    interval: 120\r\n    tolerance: 50\r\n    proxies:\r\n${\u56FD\u5BB6\u5217\u8868.map(\u56FD\u5BB6 => `      - \"${\u56FD\u5BB6}\"`).join(\"\\n\")}\r\n\r\n  - name: \"\uD83E\uDD70\u8D1F\u8F7D\u5747\u8861\"\r\n    type: load-balance\r\n    strategy: round-robin\r\n    proxies:\r\n${\u56FD\u5BB6\u5217\u8868.map(\u56FD\u5BB6 => `      - \"${\u56FD\u5BB6}\"`).join(\"\\n\")}\r\n\r\n${\u56FD\u5BB6\u5206\u7EC4\u914D\u7F6E}\r\n\r\nrules:\r\n  - GEOIP,LAN,DIRECT\r\n  - DOMAIN-SUFFIX,cn,DIRECT\r\n  - GEOIP,CN,DIRECT\r\n  - MATCH,\uD83D\uDE80\u8282\u70B9\u9009\u62E9\r\n`;\r\n\r\n  // \u5982\u679C\u542F\u7528\u4E86Base64\u52A0\u5BC6\uFF0C\u5219\u5BF9\u6574\u4E2A\u914D\u7F6E\u6587\u672C\u8FDB\u884CBase64\u7F16\u7801\r\n  if (b64Enabled) {\r\n    return btoa(unescape(encodeURIComponent(\u914D\u7F6E\u6587\u672C)));\r\n  }\r\n  return \u914D\u7F6E\u6587\u672C;\r\n}\r\n\r\nasync function \u751F\u6210\u901A\u7528(env, hostName) {\r\n  const uuid = await \u83B7\u53D6\u6216\u521D\u59CB\u5316UUID(env);\r\n  const \u8282\u70B9\u5217\u8868 = \u4F18\u9009\u8282\u70B9.length ? \u4F18\u9009\u8282\u70B9 : [`${hostName}:443`];\r\n  const b64Enabled = await env.KV\u6570\u636E\u5E93.get('b64Enabled') === 'true';\r\n  const \u914D\u7F6E\u5217\u8868 = \u8282\u70B9\u5217\u8868.map(\u8282\u70B9 => {\r\n    try {\r\n      const [\u4E3B\u5185\u5BB9, tls = 'tls'] = \u8282\u70B9.split(\"@\");\r\n      const [\u5730\u5740\u7AEF\u53E3, \u8282\u70B9\u540D\u5B57 = \u8282\u70B9\u540D\u79F0] = \u4E3B\u5185\u5BB9.split(\"#\");\r\n      const match = \u5730\u5740\u7AEF\u53E3.match(/^(?:\\[([0-9a-fA-F:]+)\\]|([^:]+))(?:\\:(\\d+))?$/);\r\n      if (!match) return null;\r\n      const \u5730\u5740 = match[1] || match[2];\r\n      const \u7AEF\u53E3 = match[3] || \"443\";\r\n      if (!\u5730\u5740) return null;\r\n      const \u4FEE\u6B63\u5730\u5740 = \u5730\u5740.includes(\":\") ? `[${\u5730\u5740}]` : \u5730\u5740;\r\n      const TLS\u5F00\u5173 = tls === 'notls' ? 'none' : 'tls';\r\n      const encodedPath = encodeURIComponent('/?ed=2560');\r\n      return `${atob('dmxlc3M=')}://${uuid}@${\u4FEE\u6B63\u5730\u5740}:${\u7AEF\u53E3}?encryption=none&security=${TLS\u5F00\u5173}&type=ws&host=${hostName}&path=${encodedPath}&sni=${hostName}#${\u8282\u70B9\u540D\u5B57}`;\r\n    } catch (error) {\r\n      console.error(`\u751F\u6210\u901A\u7528\u8282\u70B9\u5931\u8D25: ${\u8282\u70B9}, \u9519\u8BEF: ${error.message}`);\r\n      return null;\r\n    }\r\n  }).filter(Boolean);\r\n\r\n  const \u914D\u7F6E\u6587\u672C = `# Generated at: ${new Date().toISOString()}\r\n${\u914D\u7F6E\u5217\u8868.length ? \u914D\u7F6E\u5217\u8868.join(\"\\n\") : (atob('dmxlc3M=') + '://' + uuid + '@' + hostName + ':443?encryption=none&security=tls&type=ws&host=' + hostName + '&path=' + encodeURIComponent('/?ed=2560') + '&sni=' + hostName + '#\u9ED8\u8BA4\u8282\u70B9')}`;\r\n  \r\n  // \u5982\u679C\u542F\u7528\u4E86Base64\u52A0\u5BC6\uFF0C\u5219\u5BF9\u6574\u4E2A\u914D\u7F6E\u6587\u672C\u8FDB\u884CBase64\u7F16\u7801\r\n  if (b64Enabled) {\r\n    return btoa(unescape(encodeURIComponent(\u914D\u7F6E\u6587\u672C)));\r\n  }\r\n  return \u914D\u7F6E\u6587\u672C;\r\n}\r\n", "import type { Middleware } from \"./common\";\n\nconst drainBody: Middleware = async (request, env, _ctx, middlewareCtx) => {\n\ttry {\n\t\treturn await middlewareCtx.next(request, env);\n\t} finally {\n\t\ttry {\n\t\t\tif (request.body !== null && !request.bodyUsed) {\n\t\t\t\tconst reader = request.body.getReader();\n\t\t\t\twhile (!(await reader.read()).done) {}\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.error(\"Failed to drain the unused request body.\", e);\n\t\t}\n\t}\n};\n\nexport default drainBody;\n", "import type { Middleware } from \"./common\";\n\ninterface JsonError {\n\tmessage?: string;\n\tname?: string;\n\tstack?: string;\n\tcause?: JsonError;\n}\n\nfunction reduceError(e: any): JsonError {\n\treturn {\n\t\tname: e?.name,\n\t\tmessage: e?.message ?? String(e),\n\t\tstack: e?.stack,\n\t\tcause: e?.cause === undefined ? undefined : reduceError(e.cause),\n\t};\n}\n\n// See comment in `bundle.ts` for details on why this is needed\nconst jsonError: Middleware = async (request, env, _ctx, middlewareCtx) => {\n\ttry {\n\t\treturn await middlewareCtx.next(request, env);\n\t} catch (e: any) {\n\t\tconst error = reduceError(e);\n\t\treturn Response.json(error, {\n\t\t\tstatus: 500,\n\t\t\theaders: { \"MF-Experimental-Error-Stack\": \"true\" },\n\t\t});\n\t}\n};\n\nexport default jsonError;\n", "\t\t\t\timport worker, * as OTHER_EXPORTS from \"D:\\\\SakuraPanel\\\\_worker.js\";\n\t\t\t\timport * as __MIDDLEWARE_0__ from \"C:\\\\Users\\\\Administrator\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\wrangler\\\\templates\\\\middleware\\\\middleware-ensure-req-body-drained.ts\";\nimport * as __MIDDLEWARE_1__ from \"C:\\\\Users\\\\Administrator\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\wrangler\\\\templates\\\\middleware\\\\middleware-miniflare3-json-error.ts\";\n\n\t\t\t\texport * from \"D:\\\\SakuraPanel\\\\_worker.js\";\n\t\t\t\tconst MIDDLEWARE_TEST_INJECT = \"__INJECT_FOR_TESTING_WRANGLER_MIDDLEWARE__\";\n\t\t\t\texport const __INTERNAL_WRANGLER_MIDDLEWARE__ = [\n\t\t\t\t\t\n\t\t\t\t\t__MIDDLEWARE_0__.default,__MIDDLEWARE_1__.default\n\t\t\t\t]\n\t\t\t\texport default worker;", "export type Awaitable<T> = T | Promise<T>;\n// TODO: allow dispatching more events?\nexport type Dispatcher = (\n\ttype: \"scheduled\",\n\tinit: { cron?: string }\n) => Awaitable<void>;\n\nexport type IncomingRequest = Request<\n\tunknown,\n\tIncomingRequestCfProperties<unknown>\n>;\n\nexport interface MiddlewareContext {\n\tdispatch: Dispatcher;\n\tnext(request: IncomingRequest, env: any): Awaitable<Response>;\n}\n\nexport type Middleware = (\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tmiddlewareCtx: MiddlewareContext\n) => Awaitable<Response>;\n\nconst __facade_middleware__: Middleware[] = [];\n\n// The register functions allow for the insertion of one or many middleware,\n// We register internal middleware first in the stack, but have no way of controlling\n// the order that addMiddleware is run in service workers so need an internal function.\nexport function __facade_register__(...args: (Middleware | Middleware[])[]) {\n\t__facade_middleware__.push(...args.flat());\n}\nexport function __facade_registerInternal__(\n\t...args: (Middleware | Middleware[])[]\n) {\n\t__facade_middleware__.unshift(...args.flat());\n}\n\nfunction __facade_invokeChain__(\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tdispatch: Dispatcher,\n\tmiddlewareChain: Middleware[]\n): Awaitable<Response> {\n\tconst [head, ...tail] = middlewareChain;\n\tconst middlewareCtx: MiddlewareContext = {\n\t\tdispatch,\n\t\tnext(newRequest, newEnv) {\n\t\t\treturn __facade_invokeChain__(newRequest, newEnv, ctx, dispatch, tail);\n\t\t},\n\t};\n\treturn head(request, env, ctx, middlewareCtx);\n}\n\nexport function __facade_invoke__(\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tdispatch: Dispatcher,\n\tfinalMiddleware: Middleware\n): Awaitable<Response> {\n\treturn __facade_invokeChain__(request, env, ctx, dispatch, [\n\t\t...__facade_middleware__,\n\t\tfinalMiddleware,\n\t]);\n}\n", "// This loads all middlewares exposed on the middleware object and then starts\n// the invocation chain. The big idea is that we can add these to the middleware\n// export dynamically through wrangler, or we can potentially let users directly\n// add them as a sort of \"plugin\" system.\n\nimport ENTRY, { __INTERNAL_WRANGLER_MIDDLEWARE__ } from \"D:\\\\SakuraPanel\\\\.wrangler\\\\tmp\\\\bundle-O2wWoK\\\\middleware-insertion-facade.js\";\nimport { __facade_invoke__, __facade_register__, Dispatcher } from \"C:\\\\Users\\\\Administrator\\\\AppData\\\\Roaming\\\\npm\\\\node_modules\\\\wrangler\\\\templates\\\\middleware\\\\common.ts\";\nimport type { WorkerEntrypointConstructor } from \"D:\\\\SakuraPanel\\\\.wrangler\\\\tmp\\\\bundle-O2wWoK\\\\middleware-insertion-facade.js\";\n\n// Preserve all the exports from the worker\nexport * from \"D:\\\\SakuraPanel\\\\.wrangler\\\\tmp\\\\bundle-O2wWoK\\\\middleware-insertion-facade.js\";\n\nclass __Facade_ScheduledController__ implements ScheduledController {\n\treadonly #noRetry: ScheduledController[\"noRetry\"];\n\n\tconstructor(\n\t\treadonly scheduledTime: number,\n\t\treadonly cron: string,\n\t\tnoRetry: ScheduledController[\"noRetry\"]\n\t) {\n\t\tthis.#noRetry = noRetry;\n\t}\n\n\tnoRetry() {\n\t\tif (!(this instanceof __Facade_ScheduledController__)) {\n\t\t\tthrow new TypeError(\"Illegal invocation\");\n\t\t}\n\t\t// Need to call native method immediately in case uncaught error thrown\n\t\tthis.#noRetry();\n\t}\n}\n\nfunction wrapExportedHandler(worker: ExportedHandler): ExportedHandler {\n\t// If we don't have any middleware defined, just return the handler as is\n\tif (\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__ === undefined ||\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__.length === 0\n\t) {\n\t\treturn worker;\n\t}\n\t// Otherwise, register all middleware once\n\tfor (const middleware of __INTERNAL_WRANGLER_MIDDLEWARE__) {\n\t\t__facade_register__(middleware);\n\t}\n\n\tconst fetchDispatcher: ExportedHandlerFetchHandler = function (\n\t\trequest,\n\t\tenv,\n\t\tctx\n\t) {\n\t\tif (worker.fetch === undefined) {\n\t\t\tthrow new Error(\"Handler does not export a fetch() function.\");\n\t\t}\n\t\treturn worker.fetch(request, env, ctx);\n\t};\n\n\treturn {\n\t\t...worker,\n\t\tfetch(request, env, ctx) {\n\t\t\tconst dispatcher: Dispatcher = function (type, init) {\n\t\t\t\tif (type === \"scheduled\" && worker.scheduled !== undefined) {\n\t\t\t\t\tconst controller = new __Facade_ScheduledController__(\n\t\t\t\t\t\tDate.now(),\n\t\t\t\t\t\tinit.cron ?? \"\",\n\t\t\t\t\t\t() => {}\n\t\t\t\t\t);\n\t\t\t\t\treturn worker.scheduled(controller, env, ctx);\n\t\t\t\t}\n\t\t\t};\n\t\t\treturn __facade_invoke__(request, env, ctx, dispatcher, fetchDispatcher);\n\t\t},\n\t};\n}\n\nfunction wrapWorkerEntrypoint(\n\tklass: WorkerEntrypointConstructor\n): WorkerEntrypointConstructor {\n\t// If we don't have any middleware defined, just return the handler as is\n\tif (\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__ === undefined ||\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__.length === 0\n\t) {\n\t\treturn klass;\n\t}\n\t// Otherwise, register all middleware once\n\tfor (const middleware of __INTERNAL_WRANGLER_MIDDLEWARE__) {\n\t\t__facade_register__(middleware);\n\t}\n\n\t// `extend`ing `klass` here so other RPC methods remain callable\n\treturn class extends klass {\n\t\t#fetchDispatcher: ExportedHandlerFetchHandler<Record<string, unknown>> = (\n\t\t\trequest,\n\t\t\tenv,\n\t\t\tctx\n\t\t) => {\n\t\t\tthis.env = env;\n\t\t\tthis.ctx = ctx;\n\t\t\tif (super.fetch === undefined) {\n\t\t\t\tthrow new Error(\"Entrypoint class does not define a fetch() function.\");\n\t\t\t}\n\t\t\treturn super.fetch(request);\n\t\t};\n\n\t\t#dispatcher: Dispatcher = (type, init) => {\n\t\t\tif (type === \"scheduled\" && super.scheduled !== undefined) {\n\t\t\t\tconst controller = new __Facade_ScheduledController__(\n\t\t\t\t\tDate.now(),\n\t\t\t\t\tinit.cron ?? \"\",\n\t\t\t\t\t() => {}\n\t\t\t\t);\n\t\t\t\treturn super.scheduled(controller);\n\t\t\t}\n\t\t};\n\n\t\tfetch(request: Request<unknown, IncomingRequestCfProperties>) {\n\t\t\treturn __facade_invoke__(\n\t\t\t\trequest,\n\t\t\t\tthis.env,\n\t\t\t\tthis.ctx,\n\t\t\t\tthis.#dispatcher,\n\t\t\t\tthis.#fetchDispatcher\n\t\t\t);\n\t\t}\n\t};\n}\n\nlet WRAPPED_ENTRY: ExportedHandler | WorkerEntrypointConstructor | undefined;\nif (typeof ENTRY === \"object\") {\n\tWRAPPED_ENTRY = wrapExportedHandler(ENTRY);\n} else if (typeof ENTRY === \"function\") {\n\tWRAPPED_ENTRY = wrapWorkerEntrypoint(ENTRY);\n}\nexport default WRAPPED_ENTRY;\n"],
  "mappings": "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A;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAkGJA,yBAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAYJA,yBAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sFAwCkEA,yBAAI;AAAA;AAAA;AAAA;AAAA,gBAI1EA,yBAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gEAsE4CA,yBAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA8KpE;AAj0BS;AAm0BT,SAAS,2DAAc;AACrB,SAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAgFc,0CAAO;AAAA,sBACR,0CAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAwB7B;AA1GS;AA4GT,eAAe,yBAAK,KAAK,UAAU;AACjC,QAAM,OAAO,MAAM,yCAAW,GAAG;AACjC,QAAM,2BAAO,yBAAK,SAAS,2BAAO,CAAC,GAAG,QAAQ,MAAM;AACpD,QAAM,aAAa,MAAM,IAAI,qBAAM,IAAI,YAAY,MAAM;AACzD,QAAM,2BAAO,CAAC;AAEd,2BAAK,QAAQ,CAAC,cAAI,iBAAO;AACvB,UAAM,CAAC,oBAAK,GAAG,IAAI,aAAG,MAAM,GAAG;AAC/B,UAAM,CAAC,0BAAM,2BAAO,wBAAI,IAAI,mBAAI,MAAM,GAAG;AACzC,UAAM,CAAC,EAAE,cAAI,eAAK,KAAK,IAAI,yBAAK,MAAM,wBAAwB,KAAK,yBAAK,MAAM,oBAAoB;AAClG,UAAM,2BAAO,aAAG,SAAS,GAAG,IAAI,aAAG,QAAQ,YAAY,EAAE,IAAI;AAC7D,UAAM,kBAAQ,QAAQ,UAAU,UAAU;AAC1C,UAAM,eAAK,yBAAK,MAAM,GAAG,EAAE,CAAC,KAAK;AACjC,UAAM,2BAAO,yBAAK,SAAS,GAAG,IAAI,SAAS;AAE3C,6BAAK,YAAE,IAAI,yBAAK,YAAE,KAAK,EAAE,MAAM,CAAC,GAAG,MAAM,CAAC,EAAE;AAC5C,6BAAK,YAAE,EAAE,wBAAI,EAAE,KAAK;AAAA,MAClB,MAAM,GAAG,wBAAI,IAAI,yBAAK,YAAE,EAAE,wBAAI,EAAE,SAAS,CAAC;AAAA,MAC1C,QAAQ,YAAY,wBAAI,IAAI,yBAAK,YAAE,EAAE,wBAAI,EAAE,SAAS,CAAC;AAAA,UACjD,KAAK,UAAU,CAAC;AAAA,YACd,wBAAI;AAAA,UACN,YAAE;AAAA,UACF,IAAI;AAAA;AAAA,SAEL,eAAK;AAAA,SACL,QAAQ;AAAA;AAAA;AAAA;AAAA;AAAA,cAKH,QAAQ;AAAA,IAClB,CAAC;AAAA,EACH,CAAC;AAED,QAAM,2BAAO,OAAO,KAAK,wBAAI,EAAE,KAAK;AACpC,QAAM,2BAAO,yBAAK,QAAQ,kBAAM,CAAC,GAAG,yBAAK,YAAE,EAAE,MAAM,GAAG,yBAAK,YAAE,EAAE,IAAI,EAAE,IAAI,OAAK,EAAE,MAAM,CAAC,EAAE,KAAK,IAAI;AAClG,QAAM,uCAAS,yBAAK,IAAI,kBAAM;AAAA,aACnB,YAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAMb,CAAC,GAAG,yBAAK,YAAE,EAAE,MAAM,GAAG,yBAAK,YAAE,EAAE,IAAI,EAAE,IAAI,OAAK,YAAY,EAAE,IAAI,GAAG,EAAE,KAAK,IAAI,CAAC;AAAA,CAChF,EAAE,KAAK,EAAE;AAER,QAAM,2BAAO,oBAAmB,oBAAI,KAAK,GAAE,YAAY,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAyBxD,wBAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQJ,yBAAK,IAAI,kBAAM,YAAY,YAAE,GAAG,EAAE,KAAK,IAAI,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQ5C,yBAAK,IAAI,kBAAM,YAAY,YAAE,GAAG,EAAE,KAAK,IAAI,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAM5C,yBAAK,IAAI,kBAAM,YAAY,YAAE,GAAG,EAAE,KAAK,IAAI,CAAC;AAAA;AAAA,EAE5C,oCAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUN,MAAI,YAAY;AACd,WAAO,KAAK,SAAS,mBAAmB,wBAAI,CAAC,CAAC;AAAA,EAChD;AACA,SAAO;AACT;AA7Ge;AA+Gf,eAAe,yBAAK,KAAK,UAAU;AACjC,QAAM,OAAO,MAAM,yCAAW,GAAG;AACjC,QAAM,2BAAO,yBAAK,SAAS,2BAAO,CAAC,GAAG,QAAQ,MAAM;AACpD,QAAM,aAAa,MAAM,IAAI,qBAAM,IAAI,YAAY,MAAM;AACzD,QAAM,2BAAO,yBAAK,IAAI,kBAAM;AAC1B,QAAI;AACF,YAAM,CAAC,oBAAK,MAAM,KAAK,IAAI,aAAG,MAAM,GAAG;AACvC,YAAM,CAAC,0BAAM,2BAAO,wBAAI,IAAI,mBAAI,MAAM,GAAG;AACzC,YAAM,QAAQ,yBAAK,MAAM,+CAA+C;AACxE,UAAI,CAAC,MAAO,QAAO;AACnB,YAAM,eAAK,MAAM,CAAC,KAAK,MAAM,CAAC;AAC9B,YAAM,eAAK,MAAM,CAAC,KAAK;AACvB,UAAI,CAAC,aAAI,QAAO;AAChB,YAAM,2BAAO,aAAG,SAAS,GAAG,IAAI,IAAI,YAAE,MAAM;AAC5C,YAAM,kBAAQ,QAAQ,UAAU,SAAS;AACzC,YAAM,cAAc,mBAAmB,WAAW;AAClD,aAAO,GAAG,KAAK,UAAU,CAAC,MAAM,IAAI,IAAI,wBAAI,IAAI,YAAE,6BAA6B,eAAK,iBAAiB,QAAQ,SAAS,WAAW,QAAQ,QAAQ,IAAI,wBAAI;AAAA,IAC3J,SAAS,OAAO;AACd,cAAQ,MAAM,qDAAa,YAAE,mBAAS,MAAM,OAAO,EAAE;AACrD,aAAO;AAAA,IACT;AAAA,EACF,CAAC,EAAE,OAAO,OAAO;AAEjB,QAAM,2BAAO,oBAAmB,oBAAI,KAAK,GAAE,YAAY,CAAC;AAAA,EACxD,yBAAK,SAAS,yBAAK,KAAK,IAAI,IAAK,KAAK,UAAU,IAAI,QAAQ,OAAO,MAAM,WAAW,oDAAoD,WAAW,WAAW,mBAAmB,WAAW,IAAI,UAAU,WAAW,2BAAQ;AAG7N,MAAI,YAAY;AACd,WAAO,KAAK,SAAS,mBAAmB,wBAAI,CAAC,CAAC;AAAA,EAChD;AACA,SAAO;AACT;AA/Be;;;ACh1Ef,IAAM,YAAwB,8BAAO,SAAS,KAAK,MAAM,kBAAkB;AAC1E,MAAI;AACH,WAAO,MAAM,cAAc,KAAK,SAAS,GAAG;AAAA,EAC7C,UAAE;AACD,QAAI;AACH,UAAI,QAAQ,SAAS,QAAQ,CAAC,QAAQ,UAAU;AAC/C,cAAM,SAAS,QAAQ,KAAK,UAAU;AACtC,eAAO,EAAE,MAAM,OAAO,KAAK,GAAG,MAAM;AAAA,QAAC;AAAA,MACtC;AAAA,IACD,SAAS,GAAG;AACX,cAAQ,MAAM,4CAA4C,CAAC;AAAA,IAC5D;AAAA,EACD;AACD,GAb8B;AAe9B,IAAO,6CAAQ;;;ACRf,SAAS,YAAY,GAAmB;AACvC,SAAO;AAAA,IACN,MAAM,GAAG;AAAA,IACT,SAAS,GAAG,WAAW,OAAO,CAAC;AAAA,IAC/B,OAAO,GAAG;AAAA,IACV,OAAO,GAAG,UAAU,SAAY,SAAY,YAAY,EAAE,KAAK;AAAA,EAChE;AACD;AAPS;AAUT,IAAM,YAAwB,8BAAO,SAAS,KAAK,MAAM,kBAAkB;AAC1E,MAAI;AACH,WAAO,MAAM,cAAc,KAAK,SAAS,GAAG;AAAA,EAC7C,SAAS,GAAQ;AAChB,UAAM,QAAQ,YAAY,CAAC;AAC3B,WAAO,SAAS,KAAK,OAAO;AAAA,MAC3B,QAAQ;AAAA,MACR,SAAS,EAAE,+BAA+B,OAAO;AAAA,IAClD,CAAC;AAAA,EACF;AACD,GAV8B;AAY9B,IAAO,2CAAQ;;;ACzBJ,IAAM,mCAAmC;AAAA,EAE9B;AAAA,EAAyB;AAC3C;AACA,IAAO,sCAAQ;;;ACcnB,IAAM,wBAAsC,CAAC;AAKtC,SAAS,uBAAuB,MAAqC;AAC3E,wBAAsB,KAAK,GAAG,KAAK,KAAK,CAAC;AAC1C;AAFgB;AAShB,SAAS,uBACR,SACA,KACA,KACA,UACA,iBACsB;AACtB,QAAM,CAAC,MAAM,GAAG,IAAI,IAAI;AACxB,QAAM,gBAAmC;AAAA,IACxC;AAAA,IACA,KAAK,YAAY,QAAQ;AACxB,aAAO,uBAAuB,YAAY,QAAQ,KAAK,UAAU,IAAI;AAAA,IACtE;AAAA,EACD;AACA,SAAO,KAAK,SAAS,KAAK,KAAK,aAAa;AAC7C;AAfS;AAiBF,SAAS,kBACf,SACA,KACA,KACA,UACA,iBACsB;AACtB,SAAO,uBAAuB,SAAS,KAAK,KAAK,UAAU;AAAA,IAC1D,GAAG;AAAA,IACH;AAAA,EACD,CAAC;AACF;AAXgB;;;AC3ChB,IAAM,iCAAN,MAAM,gCAA8D;AAAA,EAGnE,YACU,eACA,MACT,SACC;AAHQ;AACA;AAGT,SAAK,WAAW;AAAA,EACjB;AAAA,EArBD,OAYoE;AAAA;AAAA;AAAA,EAC1D;AAAA,EAUT,UAAU;AACT,QAAI,EAAE,gBAAgB,kCAAiC;AACtD,YAAM,IAAI,UAAU,oBAAoB;AAAA,IACzC;AAEA,SAAK,SAAS;AAAA,EACf;AACD;AAEA,SAAS,oBAAoB,QAA0C;AAEtE,MACC,qCAAqC,UACrC,iCAAiC,WAAW,GAC3C;AACD,WAAO;AAAA,EACR;AAEA,aAAW,cAAc,kCAAkC;AAC1D,wBAAoB,UAAU;AAAA,EAC/B;AAEA,QAAM,kBAA+C,gCACpD,SACA,KACA,KACC;AACD,QAAI,OAAO,UAAU,QAAW;AAC/B,YAAM,IAAI,MAAM,6CAA6C;AAAA,IAC9D;AACA,WAAO,OAAO,MAAM,SAAS,KAAK,GAAG;AAAA,EACtC,GATqD;AAWrD,SAAO;AAAA,IACN,GAAG;AAAA,IACH,MAAM,SAAS,KAAK,KAAK;AACxB,YAAM,aAAyB,gCAAU,MAAM,MAAM;AACpD,YAAI,SAAS,eAAe,OAAO,cAAc,QAAW;AAC3D,gBAAM,aAAa,IAAI;AAAA,YACtB,KAAK,IAAI;AAAA,YACT,KAAK,QAAQ;AAAA,YACb,MAAM;AAAA,YAAC;AAAA,UACR;AACA,iBAAO,OAAO,UAAU,YAAY,KAAK,GAAG;AAAA,QAC7C;AAAA,MACD,GAT+B;AAU/B,aAAO,kBAAkB,SAAS,KAAK,KAAK,YAAY,eAAe;AAAA,IACxE;AAAA,EACD;AACD;AAxCS;AA0CT,SAAS,qBACR,OAC8B;AAE9B,MACC,qCAAqC,UACrC,iCAAiC,WAAW,GAC3C;AACD,WAAO;AAAA,EACR;AAEA,aAAW,cAAc,kCAAkC;AAC1D,wBAAoB,UAAU;AAAA,EAC/B;AAGA,SAAO,cAAc,MAAM;AAAA,IAC1B,mBAAyE,wBACxE,SACA,KACA,QACI;AACJ,WAAK,MAAM;AACX,WAAK,MAAM;AACX,UAAI,MAAM,UAAU,QAAW;AAC9B,cAAM,IAAI,MAAM,sDAAsD;AAAA,MACvE;AACA,aAAO,MAAM,MAAM,OAAO;AAAA,IAC3B,GAXyE;AAAA,IAazE,cAA0B,wBAAC,MAAM,SAAS;AACzC,UAAI,SAAS,eAAe,MAAM,cAAc,QAAW;AAC1D,cAAM,aAAa,IAAI;AAAA,UACtB,KAAK,IAAI;AAAA,UACT,KAAK,QAAQ;AAAA,UACb,MAAM;AAAA,UAAC;AAAA,QACR;AACA,eAAO,MAAM,UAAU,UAAU;AAAA,MAClC;AAAA,IACD,GAT0B;AAAA,IAW1B,MAAM,SAAwD;AAC7D,aAAO;AAAA,QACN;AAAA,QACA,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,MACN;AAAA,IACD;AAAA,EACD;AACD;AAnDS;AAqDT,IAAI;AACJ,IAAI,OAAO,wCAAU,UAAU;AAC9B,kBAAgB,oBAAoB,mCAAK;AAC1C,WAAW,OAAO,wCAAU,YAAY;AACvC,kBAAgB,qBAAqB,mCAAK;AAC3C;AACA,IAAO,kCAAQ;",
  "names": ["\u65B0\u7248\u672C", "SOCKS5\u8D26\u53F7", "\u9519\u8BEF", "\u914D\u7F6E\u8DEF\u5F84"]
}
